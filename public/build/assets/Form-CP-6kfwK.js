import{d as ce,a as c,o as n,b as o,i as p,u as a,e as l,g as d,t as u,F as w,r as S,j as y,c as k,C as he,k as x,w as te,p as Ve,m as ke,f as r,ad as we,l as $e,n as se,W as C}from"./app-DaeX7cdw.js";import{_ as T,a as q,b as L,c as H,d as M,e as Ce}from"./DialogTitle.vue_vue_type_script_setup_true_lang-D_nilgK0.js";import{_ as g}from"./createLucideIcon-CjSnWMAs.js";import{_ as F,c as D,a as N,b as P}from"./index-11KoE7K9.js";import{_ as Se}from"./Checkbox.vue_vue_type_script_setup_true_lang-ChzN2Ctw.js";import{_ as b,a as le}from"./Label.vue_vue_type_script_setup_true_lang-CMHm9R99.js";import{_ as Ee,a as Ae,b as Z,c as X}from"./TabsTrigger.vue_vue_type_script_setup_true_lang-D23NyGV_.js";import{_ as ie}from"./Textarea.vue_vue_type_script_setup_true_lang-Cnx2cgaS.js";import{_ as J}from"./DateTimePicker.vue_vue_type_script_setup_true_lang-CuN1rDYL.js";import{_ as je}from"./AppLayout.vue_vue_type_script_setup_true_lang-DGUFgy7V.js";import{L as ze,_ as Fe}from"./DynamicFormBuilder.vue_vue_type_script_setup_true_lang-B37I6HqF.js";import{_ as De}from"./GeographicRestrictions.vue_vue_type_script_setup_true_lang-T2TcRRkZ.js";import{U as re}from"./upload-DUVKB5_L.js";import{P as ne}from"./plus-BJOEnpvP.js";import{H as de}from"./history-CLBzjG_8.js";import{T as Ue}from"./trash-2-EKkXpNpQ.js";import{C as Ie}from"./circle-x-x83OnP5H.js";import{C as Be}from"./circle-check-big-_OEhV1Vs.js";import{C as ue}from"./clock-DeWG7NZQ.js";import"./VisuallyHidden-Dq3uFg-l.js";import"./index-D0dABG5H.js";import"./RovingFocusItem-DEx9p9eK.js";import"./AppLogo.vue_vue_type_script_setup_true_lang-Cwg8ppLD.js";import"./CardDescription.vue_vue_type_script_setup_true_lang-D2c5TVWn.js";import"./eye-C_jNXRru.js";import"./git-branch-CGmiP32q.js";const Ne={key:0,class:"text-red-500"},Pe={key:0,class:"text-sm text-destructive mt-1"},Te={key:1,class:"text-xs text-muted-foreground mt-1"},qe=ce({__name:"TimezoneSelector",props:{modelValue:{},disabled:{type:Boolean,default:!1},label:{default:"Zona Horaria"},placeholder:{default:"Seleccionar zona horaria"},description:{default:"Las fechas de apertura y cierre se aplicarán según esta zona horaria"},required:{type:Boolean,default:!1},error:{}},emits:["update:modelValue"],setup(K,{emit:f}){const m=f,G=v=>{m("update:modelValue",v)};return(v,O)=>(n(),c("div",null,[o(a(b),null,{default:l(()=>[d(u(v.label)+" ",1),v.required?(n(),c("span",Ne,"*")):p("",!0)]),_:1}),o(a(T),{"model-value":v.modelValue,"onUpdate:modelValue":G,disabled:v.disabled},{default:l(()=>[o(a(q),null,{default:l(()=>[o(a(L),{placeholder:v.placeholder},null,8,["placeholder"])]),_:1}),o(a(H),null,{default:l(()=>[(n(!0),c(w,null,S(a(ze),t=>(n(),y(a(M),{key:t.value,value:t.value},{default:l(()=>[d(u(t.label),1)]),_:2},1032,["value"]))),128))]),_:1})]),_:1},8,["model-value","disabled"]),v.error?(n(),c("p",Pe,u(v.error),1)):v.description?(n(),c("p",Te,u(v.description),1)):p("",!0)]))}}),Le={class:"flex h-full flex-1 flex-col gap-4 rounded-xl p-4"},He={class:"flex items-center justify-between"},Me={class:"text-3xl font-bold"},Ge={class:"text-muted-foreground"},Oe={class:"relative min-h-[70vh] flex-1 overflow-hidden rounded-xl border border-sidebar-border/70 dark:border-sidebar-border"},Re={class:"grid gap-6 md:grid-cols-2"},We={class:"space-y-4"},Ze={key:0,class:"text-sm text-destructive mt-1"},Xe={key:0,class:"text-sm text-destructive mt-1"},Je={key:0,class:"text-sm text-destructive mt-1"},Ke={class:"space-y-4"},Qe={key:0,class:"text-sm text-destructive mt-1"},Ye={key:1,class:"text-sm text-destructive mt-1"},ea={key:0,class:"text-sm text-destructive mt-1"},aa={key:1,class:"text-sm text-destructive mt-1"},oa={class:"flex items-center space-x-2"},ta={key:0,class:"space-y-2"},sa={class:"flex justify-between"},la={class:"flex gap-2"},ia={class:"flex justify-between"},ra={class:"flex gap-2"},na={class:"space-y-4"},da={class:"space-y-2"},ua={class:"flex gap-4"},ca={class:"flex-1"},fa={class:"flex items-center gap-2"},ma={key:0,class:"text-center py-6 text-muted-foreground"},pa={key:1,class:"space-y-3"},va=["onClick"],_a={class:"flex items-center gap-3"},ga={class:"font-medium text-sm"},ba={class:"text-xs text-muted-foreground"},xa={class:"flex items-center gap-2"},ya={key:0,class:"text-xs text-muted-foreground"},ha={key:0},Va={key:1,class:"text-xs text-muted-foreground"},ka={key:0,class:"text-center py-8 text-muted-foreground"},wa={key:1,class:"space-y-2"},$a={class:"font-medium"},Ca={class:"text-sm text-muted-foreground"},Sa={class:"flex justify-between"},eo=ce({__name:"Form",props:{categorias:{},votacion:{},cargos:{},periodosElectorales:{},convocatorias:{}},setup(K){var ae;const f=K,m=k(()=>!!f.votacion),G=k(()=>{var i;return m.value&&((i=f.votacion)==null?void 0:i.estado)==="borrador"}),v=[{title:"Admin",href:"/admin/dashboard"},{title:"Votaciones",href:"/admin/votaciones"},{title:m.value?"Editar":"Crear",href:"#"}],O=()=>{if(!f.votacion)return{titulo:"",descripcion:"",categoria_id:"",fecha_inicio:null,fecha_fin:null,estado:"borrador",resultados_publicos:!1,fecha_publicacion_resultados:null,formulario_config:[],timezone:"America/Bogota",territorios_ids:[],departamentos_ids:[],municipios_ids:[],localidades_ids:[]};const i=f.votacion;return{titulo:i.titulo||"",descripcion:i.descripcion||"",categoria_id:i.categoria_id?String(i.categoria_id):"",fecha_inicio:i.fecha_inicio||null,fecha_fin:i.fecha_fin||null,estado:i.estado||"borrador",resultados_publicos:!!i.resultados_publicos,fecha_publicacion_resultados:i.fecha_publicacion_resultados||null,formulario_config:i.formulario_config||[],timezone:i.timezone||"America/Bogota",territorios_ids:i.territorios_ids||[],departamentos_ids:i.departamentos_ids||[],municipios_ids:i.municipios_ids||[],localidades_ids:i.localidades_ids||[]}},t=he(O()),h=x("basicos"),fe=[{value:"borrador",label:"Borrador"},{value:"activa",label:"Activa"},{value:"finalizada",label:"Finalizada"}],Q=k({get:()=>({territorios_ids:t.territorios_ids||[],departamentos_ids:t.departamentos_ids||[],municipios_ids:t.municipios_ids||[],localidades_ids:t.localidades_ids||[]}),set:i=>{t.territorios_ids=i.territorios_ids,t.departamentos_ids=i.departamentos_ids,t.municipios_ids=i.municipios_ids,t.localidades_ids=i.localidades_ids}}),Y=k(()=>t.fecha_inicio&&t.fecha_inicio<new Date?"La fecha de inicio debe ser posterior a la fecha actual":""),ee=k(()=>!t.fecha_fin||!t.fecha_inicio?"":t.fecha_fin<=t.fecha_inicio?"La fecha de fin debe ser posterior a la fecha de inicio":""),R=()=>{if(!E.value){h.value="basicos",alert('Por favor completa todos los campos requeridos en la pestaña "Datos Básicos" antes de crear la votación.');return}if(t.formulario_config.length===0){alert("Por favor agrega al menos un campo al formulario antes de crear la votación.");return}m.value?t.put(`/admin/votaciones/${f.votacion.id}`,{onError:i=>{const e=Object.values(i)[0];e&&alert(`Error: ${Array.isArray(e)?e[0]:e}`)}}):t.post("/admin/votaciones",{onError:i=>{const e=Object.values(i)[0];e&&alert(`Error: ${Array.isArray(e)?e[0]:e}`)}})},E=k(()=>t.titulo&&t.categoria_id&&t.fecha_inicio&&t.fecha_fin&&t.timezone);k(()=>E.value&&t.formulario_config.length>0);const A=x(null),j=x(""),$=x(((ae=f.votacion)==null?void 0:ae.votantes)||[]),W=x([]),V=x("");x("");const U=x([]),me=async()=>{var i;if(!(!m.value||!((i=f.votacion)!=null&&i.id)))try{const e=await fetch(`/admin/votaciones/${f.votacion.id}/imports/recent`);if(e.ok){const s=await e.json();U.value=s}}catch(e){console.error("Error loading recent imports:",e)}},pe=i=>{C.get(`/admin/imports/${i}`)},ve=()=>{var i;(i=f.votacion)!=null&&i.id&&C.get(`/admin/votaciones/${f.votacion.id}/imports`)},I=i=>{switch(i){case"pending":return{icon:ue,label:"Pendiente",class:"text-yellow-600"};case"processing":return{icon:ue,label:"Procesando",class:"text-blue-600"};case"completed":return{icon:Be,label:"Completada",class:"text-green-600"};case"failed":return{icon:Ie,label:"Fallida",class:"text-red-600"}}},_e=i=>new Date(i).toLocaleString("es-ES",{month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"}),B=async()=>{var i;if(!(!m.value||!((i=f.votacion)!=null&&i.id)))try{const s=await(await fetch(`/admin/votaciones/${f.votacion.id}/votantes`)).json();W.value=s.votantes_disponibles||[]}catch(e){console.error("Error loading votantes disponibles:",e)}},ge=()=>{var i;!V.value||!m.value||!((i=f.votacion)!=null&&i.id)||C.post(`/admin/votaciones/${f.votacion.id}/votantes`,{votante_ids:[V.value]},{preserveScroll:!0,onSuccess:()=>{B();const e=W.value.find(s=>s.id.toString()===V.value);e&&$.value.push(e),V.value=""},onError:e=>{console.error("Error adding votante:",e),alert("Error al agregar votante")}})},be=i=>{var e;!m.value||!((e=f.votacion)!=null&&e.id)||C.delete(`/admin/votaciones/${f.votacion.id}/votantes`,{data:{votante_id:i},preserveScroll:!0,onSuccess:()=>{$.value=$.value.filter(s=>s.id!==i),B()},onError:s=>{console.error("Error removing votante:",s),alert("Error al remover votante")}})},xe=i=>{const e=i.target;e.files&&e.files[0]&&(A.value=e.files[0])},z=x(!1),ye=()=>{var e;if(!A.value||!m.value||!((e=f.votacion)!=null&&e.id))return;z.value=!0;const i=new FormData;i.append("csv_file",A.value),i.append("motivo",j.value),C.post(`/admin/votaciones/${f.votacion.id}/importar-votantes`,i,{preserveScroll:!0,onSuccess:s=>{var oe;z.value=!1,A.value=null,j.value="";const _=document.querySelector('input[type="file"]');_&&(_.value=""),B(),(oe=f.votacion)!=null&&oe.id&&C.get(`/admin/votaciones/${f.votacion.id}/edit`,{},{preserveScroll:!0,preserveState:!1,only:["votacion"]})},onError:s=>{z.value=!1,console.error("Error processing CSV:",s);const _=Object.values(s).flat().join(", ");alert(`Error al procesar archivo: ${_}`)}})};return te(()=>f.votacion,i=>{if(i){const e=O();t.titulo=e.titulo,t.descripcion=e.descripcion,t.categoria_id=e.categoria_id,t.fecha_inicio=e.fecha_inicio,t.fecha_fin=e.fecha_fin,t.estado=e.estado,t.resultados_publicos=e.resultados_publicos,t.fecha_publicacion_resultados=e.fecha_publicacion_resultados,t.formulario_config=e.formulario_config,t.timezone=e.timezone,m.value&&(B(),me())}},{immediate:!0,deep:!0}),te(()=>t.resultados_publicos,i=>{console.log("resultados_publicos changed to:",i)},{immediate:!0}),Ve(()=>{}),(i,e)=>(n(),c(w,null,[o(a(ke),{title:m.value?"Editar Votación":"Nueva Votación"},null,8,["title"]),o(je,{breadcrumbs:v},{default:l(()=>[r("div",Le,[r("div",He,[r("div",null,[r("h1",Me,u(m.value?"Editar Votación":"Nueva Votación"),1),r("p",Ge,u(m.value?"Modifica los datos de la votación":"Crea una nueva votación paso a paso"),1)])]),r("div",Oe,[o(a(F),{class:"border-0 shadow-none h-full"},{default:l(()=>[o(a(D),{class:"p-6"},{default:l(()=>[o(a(Ee),{modelValue:h.value,"onUpdate:modelValue":e[17]||(e[17]=s=>h.value=s),class:"w-full"},{default:l(()=>[o(a(Ae),{class:"grid w-full grid-cols-3"},{default:l(()=>[o(a(Z),{value:"basicos"},{default:l(()=>e[18]||(e[18]=[r("span",{class:"flex items-center gap-2"},[r("span",{class:"rounded-full bg-primary text-primary-foreground w-5 h-5 text-xs flex items-center justify-center"},"1"),d(" Datos Básicos ")],-1)])),_:1}),o(a(Z),{value:"formulario",disabled:!m.value&&!E.value},{default:l(()=>e[19]||(e[19]=[r("span",{class:"flex items-center gap-2"},[r("span",{class:"rounded-full bg-primary text-primary-foreground w-5 h-5 text-xs flex items-center justify-center"},"2"),d(" Formulario ")],-1)])),_:1},8,["disabled"]),o(a(Z),{value:"votantes",disabled:!m.value},{default:l(()=>e[20]||(e[20]=[r("span",{class:"flex items-center gap-2"},[r("span",{class:"rounded-full bg-primary text-primary-foreground w-5 h-5 text-xs flex items-center justify-center"},"3"),d(" Votantes ")],-1)])),_:1},8,["disabled"])]),_:1}),o(a(X),{value:"basicos",class:"space-y-6"},{default:l(()=>[r("div",Re,[r("div",We,[r("div",null,[o(a(b),{for:"titulo"},{default:l(()=>e[21]||(e[21]=[d("Título *")])),_:1}),o(a(le),{id:"titulo",modelValue:a(t).titulo,"onUpdate:modelValue":e[0]||(e[0]=s=>a(t).titulo=s),placeholder:"Nombre de la votación",error:a(t).errors.titulo},null,8,["modelValue","error"]),a(t).errors.titulo?(n(),c("p",Ze,u(a(t).errors.titulo),1)):p("",!0)]),r("div",null,[o(a(b),{for:"descripcion"},{default:l(()=>e[22]||(e[22]=[d("Descripción")])),_:1}),o(a(ie),{id:"descripcion",modelValue:a(t).descripcion,"onUpdate:modelValue":e[1]||(e[1]=s=>a(t).descripcion=s),placeholder:"Descripción detallada de la votación",rows:"4"},null,8,["modelValue"]),a(t).errors.descripcion?(n(),c("p",Xe,u(a(t).errors.descripcion),1)):p("",!0)]),r("div",null,[o(a(b),{for:"categoria"},{default:l(()=>e[23]||(e[23]=[d("Categoría *")])),_:1}),o(a(T),{modelValue:a(t).categoria_id,"onUpdate:modelValue":e[2]||(e[2]=s=>a(t).categoria_id=s)},{default:l(()=>[o(a(q),null,{default:l(()=>[o(a(L),{placeholder:"Seleccionar categoría"})]),_:1}),o(a(H),null,{default:l(()=>[(n(!0),c(w,null,S(i.categorias,s=>(n(),y(a(M),{key:s.id,value:s.id.toString()},{default:l(()=>[d(u(s.nombre),1)]),_:2},1032,["value"]))),128))]),_:1})]),_:1},8,["modelValue"]),a(t).errors.categoria_id?(n(),c("p",Je,u(a(t).errors.categoria_id),1)):p("",!0)]),o(De,{modelValue:Q.value,"onUpdate:modelValue":e[3]||(e[3]=s=>Q.value=s)},null,8,["modelValue"])]),r("div",Ke,[r("div",null,[o(a(b),{for:"fecha_inicio"},{default:l(()=>e[24]||(e[24]=[d("Fecha y Hora de Inicio *")])),_:1}),o(a(J),{modelValue:a(t).fecha_inicio,"onUpdate:modelValue":e[4]||(e[4]=s=>a(t).fecha_inicio=s),placeholder:"Seleccionar fecha y hora de inicio"},null,8,["modelValue"]),Y.value?(n(),c("p",Qe,u(Y.value),1)):p("",!0),a(t).errors.fecha_inicio?(n(),c("p",Ye,u(a(t).errors.fecha_inicio),1)):p("",!0)]),r("div",null,[o(a(b),{for:"fecha_fin"},{default:l(()=>e[25]||(e[25]=[d("Fecha y Hora de Fin *")])),_:1}),o(a(J),{modelValue:a(t).fecha_fin,"onUpdate:modelValue":e[5]||(e[5]=s=>a(t).fecha_fin=s),placeholder:"Seleccionar fecha y hora de fin"},null,8,["modelValue"]),ee.value?(n(),c("p",ea,u(ee.value),1)):p("",!0),a(t).errors.fecha_fin?(n(),c("p",aa,u(a(t).errors.fecha_fin),1)):p("",!0)]),r("div",null,[o(a(b),{for:"estado"},{default:l(()=>e[26]||(e[26]=[d("Estado")])),_:1}),o(a(T),{modelValue:a(t).estado,"onUpdate:modelValue":e[6]||(e[6]=s=>a(t).estado=s)},{default:l(()=>[o(a(q),null,{default:l(()=>[o(a(L))]),_:1}),o(a(H),null,{default:l(()=>[(n(),c(w,null,S(fe,s=>o(a(M),{key:s.value,value:s.value},{default:l(()=>[d(u(s.label),1)]),_:2},1032,["value"])),64))]),_:1})]),_:1},8,["modelValue"])]),o(qe,{modelValue:a(t).timezone,"onUpdate:modelValue":e[7]||(e[7]=s=>a(t).timezone=s),required:"",error:a(t).errors.timezone},null,8,["modelValue","error"]),r("div",oa,[o(a(Se),{id:"resultados_publicos",checked:a(t).resultados_publicos,"onUpdate:checked":e[8]||(e[8]=s=>a(t).resultados_publicos=s)},null,8,["checked"]),o(a(b),{for:"resultados_publicos"},{default:l(()=>e[27]||(e[27]=[d(" Resultados públicos ")])),_:1})]),o(we,{"enter-active-class":"transition ease-out duration-200","enter-from-class":"opacity-0 transform scale-95","enter-to-class":"opacity-100 transform scale-100","leave-active-class":"transition ease-in duration-150","leave-from-class":"opacity-100 transform scale-100","leave-to-class":"opacity-0 transform scale-95"},{default:l(()=>[a(t).resultados_publicos?(n(),c("div",ta,[o(a(b),{for:"fecha_publicacion_resultados"},{default:l(()=>e[28]||(e[28]=[d(" Fecha de publicación de resultados (opcional) ")])),_:1}),o(a(J),{id:"fecha_publicacion_resultados",modelValue:a(t).fecha_publicacion_resultados,"onUpdate:modelValue":e[9]||(e[9]=s=>a(t).fecha_publicacion_resultados=s),placeholder:"Dejar vacío para publicar al finalizar la votación"},null,8,["modelValue"]),e[29]||(e[29]=r("p",{class:"text-xs text-muted-foreground"}," Si se especifica una fecha, los resultados serán visibles desde esa fecha. Si se deja vacío, los resultados solo serán visibles después de que termine la votación. ",-1))])):p("",!0)]),_:1})])]),r("div",sa,[e[31]||(e[31]=r("div",null,null,-1)),r("div",la,[m.value?(n(),y(a(g),{key:0,onClick:R,disabled:a(t).processing||!E.value,variant:"default"},{default:l(()=>[d(u(a(t).processing?"Actualizando...":"Actualizar Votación"),1)]),_:1},8,["disabled"])):p("",!0),o(a(g),{onClick:e[10]||(e[10]=s=>h.value="formulario"),disabled:!E.value,variant:"outline"},{default:l(()=>e[30]||(e[30]=[d(" Siguiente: Configurar Formulario ")])),_:1},8,["disabled"])])])]),_:1}),o(a(X),{value:"formulario",class:"space-y-6"},{default:l(()=>{var s;return[o(Fe,{modelValue:a(t).formulario_config,"onUpdate:modelValue":e[11]||(e[11]=_=>a(t).formulario_config=_),title:"Constructor de Formulario",description:"Agrega los campos que aparecerán en la votación","show-perfil-candidatura-config":!0,"show-convocatoria-config":!0,cargos:((s=f.cargos)==null?void 0:s.filter(_=>_.es_cargo))||[],"periodos-electorales":f.periodosElectorales||[],convocatorias:f.convocatorias||[],context:"votacion"},null,8,["modelValue","cargos","periodos-electorales","convocatorias"]),r("div",ia,[o(a(g),{variant:"outline",onClick:e[12]||(e[12]=_=>h.value="basicos")},{default:l(()=>e[32]||(e[32]=[d(" Anterior ")])),_:1}),r("div",ra,[G.value?(n(),y(a(g),{key:0,variant:"outline",onClick:e[13]||(e[13]=_=>h.value="votantes"),disabled:a(t).formulario_config.length===0},{default:l(()=>e[33]||(e[33]=[d(" Siguiente: Gestionar Votantes ")])),_:1},8,["disabled"])):p("",!0),o(a(g),{onClick:R,disabled:a(t).processing||a(t).formulario_config.length===0},{default:l(()=>[d(u(a(t).processing?"Guardando...":m.value?"Actualizar":"Crear")+" Votación ",1)]),_:1},8,["disabled"])])])]}),_:1}),o(a(X),{value:"votantes",class:"space-y-6"},{default:l(()=>[e[46]||(e[46]=r("div",null,[r("h3",{class:"text-lg font-semibold"},"Gestión de Votantes"),r("p",{class:"text-sm text-muted-foreground"}," Asigna los usuarios que podrán participar en esta votación ")],-1)),o(a(F),null,{default:l(()=>[o(a(N),null,{default:l(()=>[o(a(P),{class:"flex items-center gap-2"},{default:l(()=>[o(a(re),{class:"h-5 w-5"}),e[34]||(e[34]=d(" Importar Votantes "))]),_:1})]),_:1}),o(a(D),null,{default:l(()=>[r("div",na,[e[36]||(e[36]=r("p",{class:"text-sm text-muted-foreground"}," Sube un archivo CSV con los datos de los votantes. El archivo debe contener las columnas: nombre, email, documento_identidad, territorio_id, departamento_id, municipio_id ",-1)),e[37]||(e[37]=r("p",{class:"text-sm text-blue-600"},[r("a",{href:"/ejemplo-votantes.csv",download:"",class:"underline"}," 📥 Descargar ejemplo de formato CSV ")],-1)),r("div",da,[o(a(b),{for:"motivo-importacion"},{default:l(()=>e[35]||(e[35]=[d("Motivo de la importación")])),_:1}),o(a(ie),{id:"motivo-importacion",modelValue:j.value,"onUpdate:modelValue":e[14]||(e[14]=s=>j.value=s),placeholder:"Describe el motivo por el cual se están importando estos votantes...",rows:"3",class:"resize-none"},null,8,["modelValue"])]),o(a(le),{type:"file",accept:".csv",onChange:xe}),o(a(g),{variant:"outline",disabled:!A.value||!j.value.trim()||z.value,onClick:ye},{default:l(()=>[o(a(re),{class:"mr-2 h-4 w-4"}),d(" "+u(z.value?"Procesando...":"Procesar Archivo"),1)]),_:1},8,["disabled"])])]),_:1})]),_:1}),m.value?(n(),y(a(F),{key:0},{default:l(()=>[o(a(N),null,{default:l(()=>[o(a(P),{class:"flex items-center gap-2"},{default:l(()=>[o(a(ne),{class:"h-5 w-5"}),e[38]||(e[38]=d(" Agregar Votante "))]),_:1})]),_:1}),o(a(D),null,{default:l(()=>[r("div",ua,[r("div",ca,[o(a(T),{modelValue:V.value,"onUpdate:modelValue":e[15]||(e[15]=s=>V.value=s)},{default:l(()=>[o(a(q),null,{default:l(()=>[o(a(L),{placeholder:"Seleccionar usuario..."})]),_:1}),o(a(H),null,{default:l(()=>[(n(!0),c(w,null,S(W.value,s=>(n(),y(a(M),{key:s.id,value:s.id.toString()},{default:l(()=>[d(u(s.name)+" ("+u(s.email)+") ",1)]),_:2},1032,["value"]))),128))]),_:1})]),_:1},8,["modelValue"])]),o(a(g),{onClick:ge,disabled:!V.value},{default:l(()=>[o(a(ne),{class:"mr-2 h-4 w-4"}),e[39]||(e[39]=d(" Agregar "))]),_:1},8,["disabled"])])]),_:1})]),_:1})):p("",!0),m.value?(n(),y(a(F),{key:1},{default:l(()=>[o(a(N),null,{default:l(()=>[o(a(P),{class:"flex items-center justify-between"},{default:l(()=>[r("span",fa,[o(a(de),{class:"h-5 w-5"}),e[40]||(e[40]=d(" Historial de Importaciones "))]),U.value.length>0?(n(),y(a(g),{key:0,variant:"outline",size:"sm",onClick:ve},{default:l(()=>e[41]||(e[41]=[d(" Ver Todas ")])),_:1})):p("",!0)]),_:1})]),_:1}),o(a(D),null,{default:l(()=>[U.value.length===0?(n(),c("div",ma,[o(a(de),{class:"mx-auto h-8 w-8 mb-2"}),e[42]||(e[42]=r("p",null,"No hay importaciones registradas",-1)),e[43]||(e[43]=r("p",{class:"text-sm"},"Las importaciones aparecerán aquí una vez que subas archivos CSV",-1))])):(n(),c("div",pa,[(n(!0),c(w,null,S(U.value,s=>(n(),c("div",{key:s.id,class:"flex items-center justify-between p-3 border rounded-lg hover:bg-gray-50 cursor-pointer",onClick:_=>pe(s.id)},[r("div",_a,[(n(),y($e(I(s.status).icon),{class:se(["h-4 w-4",I(s.status).class])},null,8,["class"])),r("div",null,[r("p",ga,u(s.original_filename),1),r("p",ba," Por "+u(s.created_by.name)+" • "+u(_e(s.created_at)),1)])]),r("div",xa,[o(a(Ce),{variant:"outline",class:se(I(s.status).class)},{default:l(()=>[d(u(I(s.status).label),1)]),_:2},1032,["class"]),s.status==="completed"?(n(),c("div",ya,[d(u(s.successful_rows)+" exitosos ",1),s.failed_rows>0?(n(),c("span",ha,", "+u(s.failed_rows)+" errores",1)):p("",!0)])):s.status==="processing"?(n(),c("div",Va,u(s.progress_percentage)+"% ",1)):p("",!0)])],8,va))),128))]))]),_:1})]),_:1})):p("",!0),o(a(F),null,{default:l(()=>[o(a(N),null,{default:l(()=>[o(a(P),null,{default:l(()=>[d("Votantes Asignados ("+u($.value.length)+")",1)]),_:1})]),_:1}),o(a(D),null,{default:l(()=>[$.value.length===0?(n(),c("div",ka,e[44]||(e[44]=[r("p",null,"No hay votantes asignados a esta votación",-1),r("p",{class:"text-sm"},"Importa un archivo CSV o agrega votantes manualmente",-1)]))):(n(),c("div",wa,[(n(!0),c(w,null,S($.value,s=>(n(),c("div",{key:s.id,class:"flex items-center justify-between p-3 border rounded-lg"},[r("div",null,[r("p",$a,u(s.name),1),r("p",Ca,u(s.email),1)]),o(a(g),{variant:"ghost",size:"sm",onClick:_=>be(s.id)},{default:l(()=>[o(a(Ue),{class:"h-4 w-4 text-destructive"})]),_:2},1032,["onClick"])]))),128))]))]),_:1})]),_:1}),r("div",Sa,[o(a(g),{variant:"outline",onClick:e[16]||(e[16]=s=>h.value="formulario")},{default:l(()=>e[45]||(e[45]=[d(" Anterior ")])),_:1}),o(a(g),{onClick:R,disabled:a(t).processing},{default:l(()=>[d(u(a(t).processing?"Guardando...":"Actualizar")+" Votación ",1)]),_:1},8,["disabled"])])]),_:1})]),_:1},8,["modelValue"])]),_:1})]),_:1})])])]),_:1})],64))}});export{eo as default};
