import{l as S,e as z,w as G,m as R}from"./DialogTitle.vue_vue_type_script_setup_true_lang-Cap5hEl3.js";import{_ as b}from"./createLucideIcon-_oXcxsH_.js";import{_ as x,c as _,a as g,b as h}from"./index-C1n5YpSv.js";import{_ as X}from"./HistorialCandidatura.vue_vue_type_script_setup_true_lang-CMcgXtL5.js";import{_ as J}from"./AppLayout.vue_vue_type_script_setup_true_lang-DrR_52Cc.js";import{d as K,k as Q,c as C,a as w,o as l,b as t,u as a,m as W,e as r,f as s,j as u,i as c,n as N,l as k,t as n,g as o,P as $,F as Y}from"./app-C-ljWtfy.js";import{P}from"./plus-CEd_Yrfl.js";import{S as y}from"./square-pen-eFTQUC6n.js";import{C as I}from"./clock-Cb6qrYV_.js";import{C as V}from"./circle-x-jOj5Bprj.js";import{C as A}from"./circle-check-big-R1DwQvLv.js";import{M as Z}from"./message-square-B8HwqxA-.js";import{U as B}from"./user-Q-m993Fk.js";import{H as aa}from"./history-B43_ysb4.js";import"./VisuallyHidden-SZsN-sM_.js";import"./Label.vue_vue_type_script_setup_true_lang-BUmVMQfq.js";import"./index-BfIyhi4o.js";import"./Skeleton.vue_vue_type_script_setup_true_lang-Cb9SD9_F.js";import"./eye-C1Tj_mCC.js";import"./AppLogo.vue_vue_type_script_setup_true_lang-DK8M-y8i.js";const ea={class:"flex h-full flex-1 flex-col gap-4 rounded-xl p-4"},ta={class:"flex flex-col sm:flex-row sm:items-center gap-4"},sa={class:"flex items-center gap-4 flex-1"},ra={class:"flex-1"},ia={class:"text-xl font-semibold mb-1"},oa={class:"text-muted-foreground mb-2"},da={key:0,class:"flex items-center gap-2 flex-wrap"},la={key:0,class:"w-full sm:w-auto"},na={class:"text-blue-700 dark:text-blue-300"},ua={key:1},ca={class:"grid gap-4 md:grid-cols-3"},ma={class:"flex items-center gap-2"},fa={class:"flex items-center gap-2"},pa={class:"flex items-center gap-2"},xa={class:"flex items-center gap-2"},_a={class:"text-xs text-muted-foreground"},va={class:"text-xs text-muted-foreground"},ba={class:"flex gap-1"},La=K({__name:"Dashboard",props:{candidatura:{},configuracion:{}},setup(M){const d=M,F=[{title:"Dashboard",href:"/dashboard"},{title:"Mi Candidatura",href:"#"}],m=Q(!1),f=C(()=>!!d.candidatura),H=C(()=>{if(!d.candidatura)return P;switch(d.candidatura.estado){case"aprobado":return A;case"rechazado":return V;case"pendiente":return I;case"borrador":return y;default:return S}}),L=C(()=>{if(!d.candidatura)return"text-blue-600";switch(d.candidatura.estado){case"aprobado":return"text-green-600";case"rechazado":return"text-red-600";case"pendiente":return"text-blue-600";case"borrador":return"text-yellow-600";default:return"text-gray-600"}}),v=C(()=>{if(!d.candidatura)return{text:"Crear Perfil de Candidatura",href:"/candidaturas/create",icon:P,description:"Completa tu perfil para poder postularte a convocatorias"};if(d.candidatura.puede_editar){let i="Editar Candidatura",e="Completa o actualiza la información de tu candidatura";return d.candidatura.estado==="rechazado"?e="Corrige los aspectos señalados y reenvía tu candidatura":d.candidatura.estado==="aprobado"?(i="Editar Campos Permitidos",e="Solo puedes editar campos marcados como editables. Los cambios requerirán nueva aprobación."):d.candidatura.tiene_datos||(i="Completar Candidatura"),{text:i,href:`/candidaturas/${d.candidatura.id}/edit`,icon:y,description:e}}return null}),j=i=>{if(!i)return"Fecha no disponible";try{const e=new Date(i);if(isNaN(e.getTime())){const p=i.match(/(\d{1,2})\/(\d{1,2})\/(\d{4})\s+(\d{1,2}):(\d{2})/);if(p){const[,D,q,T,U,O]=p,E=new Date(parseInt(T),parseInt(q)-1,parseInt(D),parseInt(U),parseInt(O));if(!isNaN(E.getTime()))return E.toLocaleDateString("es-ES",{year:"numeric",month:"long",day:"numeric",hour:"2-digit",minute:"2-digit"})}return i}return e.toLocaleDateString("es-ES",{year:"numeric",month:"long",day:"numeric",hour:"2-digit",minute:"2-digit"})}catch(e){return console.error("Error al formatear fecha:",e),i||"Fecha no disponible"}};return(i,e)=>(l(),w(Y,null,[t(a(W),{title:"Mi Candidatura"}),t(J,{breadcrumbs:F},{default:r(()=>{var p;return[s("div",ea,[e[14]||(e[14]=s("div",{class:"flex items-center justify-between"},[s("div",null,[s("h1",{class:"text-3xl font-bold"},"Mi Candidatura"),s("p",{class:"text-muted-foreground"}," Gestiona tu perfil de candidatura para participar en convocatorias ")])],-1)),t(a(x),{class:"border-2"},{default:r(()=>[t(a(_),{class:"p-6"},{default:r(()=>[s("div",ta,[s("div",sa,[s("div",{class:N([L.value,"p-3 rounded-full bg-opacity-10 flex-shrink-0"])},[(l(),u(k(H.value),{class:"h-8 w-8"}))],2),s("div",ra,[s("h3",ia,n(f.value?i.candidatura.estado_label:"Sin Candidatura"),1),s("p",oa,n(f.value?`Versión ${i.candidatura.version} - Actualizada el ${j(i.candidatura.updated_at)}`:"Aún no has creado tu perfil de candidatura"),1),f.value?(l(),w("div",da,[t(a(z),{class:N(i.candidatura.estado_color)},{default:r(()=>[o(n(i.candidatura.estado_label),1)]),_:1},8,["class"]),i.candidatura.tiene_datos?c("",!0):(l(),u(a(z),{key:0,variant:"outline",class:"bg-yellow-50 text-yellow-700"},{default:r(()=>e[1]||(e[1]=[o(" Incompleto ")])),_:1}))])):c("",!0)])]),v.value?(l(),w("div",la,[t(a($),{href:v.value.href,class:"block"},{default:r(()=>[t(a(b),{class:"w-full sm:w-auto"},{default:r(()=>[(l(),u(k(v.value.icon),{class:"mr-2 h-4 w-4"})),o(" "+n(v.value.text),1)]),_:1})]),_:1},8,["href"])])):c("",!0)])]),_:1})]),_:1}),(p=i.candidatura)!=null&&p.comentarios_admin?(l(),u(a(x),{key:0,class:"border-blue-200 dark:border-blue-800 bg-blue-50 dark:bg-blue-950/20"},{default:r(()=>[t(a(g),null,{default:r(()=>[t(a(h),{class:"text-blue-800 dark:text-blue-200 flex items-center gap-2"},{default:r(()=>[t(a(Z),{class:"h-5 w-5"}),e[2]||(e[2]=o(" Comentarios de la comisión "))]),_:1})]),_:1}),t(a(_),null,{default:r(()=>[s("p",na,n(i.candidatura.comentarios_admin),1)]),_:1})]),_:1})):c("",!0),f.value&&m.value?(l(),w("div",ua,[t(X,{"candidatura-id":i.candidatura.id,"version-actual":i.candidatura.version},null,8,["candidatura-id","version-actual"])])):c("",!0),s("div",ca,[t(a(x),{class:"h-fit"},{default:r(()=>[t(a(g),{class:"pb-3"},{default:r(()=>[t(a(h),{class:"text-base flex items-center gap-2"},{default:r(()=>[t(a(B),{class:"h-4 w-4"}),e[3]||(e[3]=o(" Estados "))]),_:1})]),_:1}),t(a(_),{class:"space-y-2"},{default:r(()=>[s("div",ma,[t(a(y),{class:"h-3 w-3 text-yellow-600"}),e[4]||(e[4]=s("p",{class:"text-xs"},[s("span",{class:"font-medium"},"Borrador:"),o(" Editable")],-1))]),s("div",fa,[t(a(I),{class:"h-3 w-3 text-blue-600"}),e[5]||(e[5]=s("p",{class:"text-xs"},[s("span",{class:"font-medium"},"Pendiente:"),o(" En revisión")],-1))]),s("div",pa,[t(a(A),{class:"h-3 w-3 text-green-600"}),e[6]||(e[6]=s("p",{class:"text-xs"},[s("span",{class:"font-medium"},"Aprobado:"),o(" Listo")],-1))]),s("div",xa,[t(a(V),{class:"h-3 w-3 text-red-600"}),e[7]||(e[7]=s("p",{class:"text-xs"},[s("span",{class:"font-medium"},"Rechazado:"),o(" Corregir")],-1))])]),_:1})]),_:1}),t(a(x),{class:"h-fit"},{default:r(()=>[t(a(g),{class:"pb-3"},{default:r(()=>[t(a(h),{class:"text-base flex items-center gap-2"},{default:r(()=>[t(a(S),{class:"h-4 w-4"}),e[8]||(e[8]=o(" Configuración "))]),_:1})]),_:1}),t(a(_),{class:"space-y-2"},{default:r(()=>[s("div",null,[e[9]||(e[9]=s("p",{class:"text-xs font-medium"},"Campos:",-1)),s("p",_a,n(i.configuracion.resumen),1)]),s("div",null,[e[10]||(e[10]=s("p",{class:"text-xs font-medium"},"Versión:",-1)),s("p",va,"v"+n(i.configuracion.version),1)])]),_:1})]),_:1}),f.value?(l(),u(a(x),{key:0,class:"h-fit"},{default:r(()=>[t(a(g),{class:"pb-3"},{default:r(()=>[t(a(h),{class:"text-base"},{default:r(()=>e[11]||(e[11]=[o("Acciones")])),_:1})]),_:1}),t(a(_),{class:"space-y-2"},{default:r(()=>[t(a(b),{onClick:e[0]||(e[0]=D=>m.value=!m.value),variant:"outline",class:"w-full"},{default:r(()=>[t(a(aa),{class:"mr-2 h-4 w-4"}),o(" "+n(m.value?"Ocultar":"Mostrar")+" Historial ",1),(l(),u(k(m.value?a(G):a(R)),{class:"ml-auto h-4 w-4"}))]),_:1}),s("div",ba,[t(a($),{href:`/candidaturas/${i.candidatura.id}`},{default:r(()=>[t(a(b),{variant:"outline",size:"sm"},{default:r(()=>[t(a(B),{class:"mr-1 h-3 w-3"}),e[12]||(e[12]=o(" Ver "))]),_:1})]),_:1},8,["href"]),i.candidatura.puede_editar?(l(),u(a($),{key:0,href:`/candidaturas/${i.candidatura.id}/edit`},{default:r(()=>[t(a(b),{variant:"outline",size:"sm"},{default:r(()=>[t(a(y),{class:"mr-1 h-3 w-3"}),e[13]||(e[13]=o(" Editar "))]),_:1})]),_:1},8,["href"])):c("",!0)])]),_:1})]),_:1})):c("",!0)])])]}),_:1})],64))}});export{La as default};
