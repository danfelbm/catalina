import{d as z,k as M,c as w,a as n,o as i,b as e,u as t,m as H,e as r,f as s,j as h,i as c,_ as N,W as q,g as l,P as y,n as S,t as o,F as D,r as B,bK as F,l as P}from"./app-7LlKm78u.js";import{e as $,w as O,m as U}from"./DialogTitle.vue_vue_type_script_setup_true_lang-B5BWniUE.js";import{_}from"./createLucideIcon-C3Ab61m5.js";import{_ as f,c as m,a as g,b}from"./index-Cmp74z6d.js";import{_ as W}from"./Label.vue_vue_type_script_setup_true_lang-CNdlZ2bU.js";import{_ as I}from"./AppLayout.vue_vue_type_script_setup_true_lang-CyoQlVBv.js";import{_ as K}from"./HistorialCandidatura.vue_vue_type_script_setup_true_lang-I-IeXt2b.js";import{A as R}from"./arrow-left-Mds2BBut.js";import{S as k}from"./square-pen-avcIrZfD.js";import{M as T}from"./message-square-B6NelvxO.js";import{U as G}from"./user-DvDj7gu6.js";import{C as J}from"./clock-BnjXW5pn.js";import{H as Q}from"./history-kbZGJLIp.js";import"./VisuallyHidden-BQiVCHMw.js";import"./index-BLTdg2QY.js";import"./AppLogo.vue_vue_type_script_setup_true_lang-Cne8tvjX.js";import"./Skeleton.vue_vue_type_script_setup_true_lang-X6ANwPVk.js";import"./eye-mFpk8ekn.js";const X={class:"flex h-full flex-1 flex-col gap-4 rounded-xl p-4"},Y={class:"flex items-center justify-between"},Z={class:"flex gap-2"},aa={class:"flex items-center justify-between"},ta={class:"flex items-center gap-4"},ea={class:"flex items-center gap-2"},sa={class:"text-sm text-muted-foreground"},da={class:"text-right text-sm text-muted-foreground"},ra={key:0},ia={class:"text-blue-700 dark:text-blue-300"},oa={key:0,class:"text-center py-8"},na={key:1,class:"space-y-6"},la={class:"grid gap-2 md:grid-cols-3"},ua={class:"md:col-span-1"},ca={key:0,class:"text-red-500"},fa={key:0,class:"text-xs text-muted-foreground mt-1"},ma={class:"md:col-span-2"},pa={class:"min-h-[2rem] flex items-center"},_a={class:"text-muted-foreground"},ga={class:"mb-4"},ba={class:"grid gap-4 md:grid-cols-3"},ha={class:"flex items-center gap-2"},xa={class:"text-xs text-muted-foreground"},va={key:0,class:"text-xs text-green-600 dark:text-green-400"},ya={key:1,class:"text-xs text-orange-600 dark:text-orange-400"},ka={key:2,class:"text-xs text-blue-600 dark:text-blue-400"},Ca={key:0},wa={key:1,class:"text-center"},Sa={key:2,class:"text-center"},Da={class:"text-xs space-y-1"},$a={class:"font-medium"},Aa={class:"font-medium"},Ea={key:0},Va={class:"font-medium"},Ja=z({__name:"Show",props:{candidatura:{},configuracion_campos:{}},setup(A){const x=A,E=[{title:"Dashboard",href:"/dashboard"},{title:"Mi Candidatura",href:"/candidaturas"},{title:"Ver Candidatura",href:"#"}],p=M(!1),v=w(()=>x.candidatura.estado==="borrador"||x.candidatura.estado==="rechazado"),V=w(()=>!!x.candidatura.comentarios_admin),L=()=>{p.value=!p.value},j=(d,a)=>{if(!a)return"No especificado";if(d.type==="checkbox")return Array.isArray(a)?a.join(", "):a;if(typeof a=="string"&&/^\d{4}-\d{2}-\d{2}/.test(a))try{return new Date(a).toLocaleDateString("es-ES")}catch{return a}return Array.isArray(a)?a.join(", "):typeof a=="number"?a.toString():String(a)},C=d=>new Date(d).toLocaleDateString("es-ES",{year:"numeric",month:"long",day:"numeric",hour:"2-digit",minute:"2-digit"});return(d,a)=>(i(),n(D,null,[e(t(H),{title:"Mi Candidatura"}),e(I,{breadcrumbs:E},{default:r(()=>[s("div",X,[s("div",Y,[a[3]||(a[3]=s("div",null,[s("h1",{class:"text-3xl font-bold"},"Mi Candidatura"),s("p",{class:"text-muted-foreground"}," Vista detallada de tu perfil de candidatura ")],-1)),s("div",Z,[e(t(_),{variant:"outline",onClick:a[0]||(a[0]=u=>t(q).visit("/candidaturas"))},{default:r(()=>[e(t(R),{class:"mr-2 h-4 w-4"}),a[1]||(a[1]=l(" Volver "))]),_:1}),v.value?(i(),h(t(y),{key:0,href:`/candidaturas/${d.candidatura.id}/edit`},{default:r(()=>[e(t(_),null,{default:r(()=>[e(t(k),{class:"mr-2 h-4 w-4"}),a[2]||(a[2]=l(" Editar "))]),_:1})]),_:1},8,["href"])):c("",!0)])]),e(t(f),null,{default:r(()=>[e(t(m),{class:"p-6"},{default:r(()=>[s("div",aa,[s("div",ta,[s("div",ea,[e(t($),{class:S([d.candidatura.estado_color,"text-sm"])},{default:r(()=>[l(o(d.candidatura.estado_label),1)]),_:1},8,["class"]),s("span",sa," Versión "+o(d.candidatura.version),1)])]),s("div",da,[s("p",null,"Creada: "+o(C(d.candidatura.created_at)),1),s("p",null,"Actualizada: "+o(C(d.candidatura.updated_at)),1),d.candidatura.fecha_aprobacion?(i(),n("p",ra," Aprobada: "+o(d.candidatura.fecha_aprobacion),1)):c("",!0)])])]),_:1})]),_:1}),V.value?(i(),h(t(f),{key:0,class:"border-blue-200 dark:border-blue-800 bg-blue-50 dark:bg-blue-950/20"},{default:r(()=>[e(t(g),null,{default:r(()=>[e(t(b),{class:"text-blue-800 dark:text-blue-200 flex items-center gap-2"},{default:r(()=>[e(t(T),{class:"h-5 w-5"}),a[4]||(a[4]=l(" Comentarios de la comisión "))]),_:1})]),_:1}),e(t(m),null,{default:r(()=>[s("p",ia,o(d.candidatura.comentarios_admin),1)]),_:1})]),_:1})):c("",!0),e(t(f),null,{default:r(()=>[e(t(g),null,{default:r(()=>[e(t(b),{class:"flex items-center gap-2"},{default:r(()=>[e(t(G),{class:"h-5 w-5"}),a[5]||(a[5]=l(" Información de Candidatura "))]),_:1})]),_:1}),e(t(m),null,{default:r(()=>[!d.candidatura.formulario_data||Object.keys(d.candidatura.formulario_data).length===0?(i(),n("div",oa,[e(t(J),{class:"mx-auto h-12 w-12 text-yellow-500"}),a[7]||(a[7]=s("h3",{class:"mt-4 text-lg font-medium"},"Candidatura vacía",-1)),a[8]||(a[8]=s("p",{class:"text-muted-foreground mb-4"},"Aún no has completado tu perfil de candidatura.",-1)),v.value?(i(),h(t(y),{key:0,href:`/candidaturas/${d.candidatura.id}/edit`},{default:r(()=>[e(t(_),null,{default:r(()=>[e(t(k),{class:"mr-2 h-4 w-4"}),a[6]||(a[6]=l(" Completar Candidatura "))]),_:1})]),_:1},8,["href"])):c("",!0)])):(i(),n("div",na,[(i(!0),n(D,null,B(d.configuracion_campos,u=>(i(),n("div",{key:u.id,class:"border-b pb-4 last:border-b-0"},[s("div",la,[s("div",ua,[e(t(W),{class:"text-sm font-medium flex items-center gap-1"},{default:r(()=>[l(o(u.title)+" ",1),u.required?(i(),n("span",ca,"*")):c("",!0)]),_:2},1024),u.description?(i(),n("p",fa,o(u.description),1)):c("",!0)]),s("div",ma,[s("div",pa,[s("p",_a,o(j(u,d.candidatura.formulario_data[u.id])),1)])])])]))),128))]))]),_:1})]),_:1}),N(s("div",ga,[e(K,{"candidatura-id":d.candidatura.id,"version-actual":d.candidatura.version,"is-admin":!1},null,8,["candidatura-id","version-actual"])],512),[[F,p.value]]),s("div",ba,[e(t(f),{class:"h-fit"},{default:r(()=>[e(t(g),{class:"pb-3"},{default:r(()=>[e(t(b),{class:"text-base"},{default:r(()=>a[9]||(a[9]=[l("Estado")])),_:1})]),_:1}),e(t(m),{class:"space-y-2"},{default:r(()=>[s("div",ha,[e(t($),{class:S([d.candidatura.estado_color,"text-xs"])},{default:r(()=>[l(o(d.candidatura.estado_label),1)]),_:1},8,["class"]),s("span",xa,"v"+o(d.candidatura.version),1)]),d.candidatura.estado==="aprobado"?(i(),n("div",va," ✓ Lista para convocatorias ")):d.candidatura.estado==="rechazado"?(i(),n("div",ya," Requiere corrección ")):(i(),n("div",ka,o(d.candidatura.formulario_data&&Object.keys(d.candidatura.formulario_data).length>0?"En revisión":"Pendiente de completar"),1))]),_:1})]),_:1}),e(t(f),{class:"h-fit"},{default:r(()=>[e(t(g),{class:"pb-3"},{default:r(()=>[e(t(b),{class:"text-base"},{default:r(()=>a[10]||(a[10]=[l("Acciones")])),_:1})]),_:1}),e(t(m),{class:"space-y-2"},{default:r(()=>[e(t(_),{onClick:L,variant:"outline",class:"w-full"},{default:r(()=>[e(t(Q),{class:"mr-2 h-4 w-4"}),l(" "+o(p.value?"Ocultar":"Mostrar")+" Historial de Cambios ",1),(i(),h(P(p.value?t(O):t(U)),{class:"ml-auto h-4 w-4"}))]),_:1}),v.value?(i(),n("div",Ca,[e(t(y),{href:`/candidaturas/${d.candidatura.id}/edit`},{default:r(()=>[e(t(_),{class:"w-full"},{default:r(()=>[e(t(k),{class:"mr-2 h-4 w-4"}),l(" "+o(d.candidatura.estado==="rechazado"?"Corregir":"Editar"),1)]),_:1})]),_:1},8,["href"])])):d.candidatura.estado==="aprobado"?(i(),n("div",wa,a[11]||(a[11]=[s("p",{class:"text-xs text-green-600 dark:text-green-400 font-medium"}," ✓ Lista para usar ",-1)]))):(i(),n("div",Sa,a[12]||(a[12]=[s("p",{class:"text-xs text-blue-600 dark:text-blue-400 font-medium"}," ⏳ En revisión ",-1)])))]),_:1})]),_:1}),e(t(f),{class:"h-fit"},{default:r(()=>[e(t(g),{class:"pb-3"},{default:r(()=>[e(t(b),{class:"text-base"},{default:r(()=>a[13]||(a[13]=[l("Configuración actual")])),_:1})]),_:1}),e(t(m),{class:"space-y-2"},{default:r(()=>[s("div",Da,[s("div",null,[a[14]||(a[14]=s("span",{class:"text-muted-foreground"},"Creada:",-1)),s("p",$a,o(new Date(d.candidatura.created_at).toLocaleDateString("es-ES")),1)]),s("div",null,[a[15]||(a[15]=s("span",{class:"text-muted-foreground"},"Actualizada:",-1)),s("p",Aa,o(new Date(d.candidatura.updated_at).toLocaleDateString("es-ES")),1)]),d.candidatura.fecha_aprobacion?(i(),n("div",Ea,[a[16]||(a[16]=s("span",{class:"text-muted-foreground"},"Aprobada:",-1)),s("p",Va,o(d.candidatura.fecha_aprobacion),1)])):c("",!0)])]),_:1})]),_:1})])])]),_:1})],64))}});export{Ja as default};
