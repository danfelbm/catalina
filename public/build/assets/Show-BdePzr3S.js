import{e as R,T as F,j as M,k as G,l as H,_ as J}from"./AppLayout.vue_vue_type_script_setup_true_lang-DrR_52Cc.js";import{d as K,j as f,o as r,e as l,b as t,f as o,u as e,m as O,t as u,g as n,P as $,a as m,i as V,F as x,r as y}from"./app-C-ljWtfy.js";import{_ as w}from"./createLucideIcon-_oXcxsH_.js";import{_ as p,a as _,b as g,c}from"./index-C1n5YpSv.js";import{_ as j}from"./CardDescription.vue_vue_type_script_setup_true_lang-Dy74ld2R.js";import{e as v,U as Q}from"./DialogTitle.vue_vue_type_script_setup_true_lang-Cap5hEl3.js";import{_ as W,a as X,b as k,c as h}from"./TabsTrigger.vue_vue_type_script_setup_true_lang-b7xwyLkR.js";import{_ as Y,a as Z,b as U,c as S,d as ee,e as P}from"./TableHeader.vue_vue_type_script_setup_true_lang-BW0HKsxw.js";import{S as se}from"./square-pen-eFTQUC6n.js";import{A as te}from"./arrow-left-CpNmfABz.js";import{L as le}from"./lock-DztiMuxR.js";import"./Label.vue_vue_type_script_setup_true_lang-BUmVMQfq.js";import"./index-BfIyhi4o.js";import"./AppLogo.vue_vue_type_script_setup_true_lang-DK8M-y8i.js";import"./VisuallyHidden-SZsN-sM_.js";import"./RovingFocusItem-CaM9lr2a.js";const oe={class:"flex h-full flex-1 flex-col gap-4 rounded-xl p-4"},ae={class:"flex items-center justify-between"},ne={class:"flex items-center gap-4"},ie={class:"p-3 bg-primary/10 rounded-lg"},re={class:"text-2xl font-bold tracking-tight"},de={class:"flex items-center gap-2 mt-1"},ue={class:"flex gap-2"},me={class:"grid gap-6 md:grid-cols-3"},fe={class:"text-2xl font-bold"},pe={class:"text-2xl font-bold"},_e={class:"text-2xl font-bold"},ge={class:"grid grid-cols-2 gap-4"},ce={class:"text-sm font-mono"},ve={class:"text-sm font-mono"},xe={class:"text-sm"},ye={class:"text-sm"},be={key:0},$e={class:"text-sm"},we={key:1},ke={class:"flex flex-wrap gap-2"},he={key:0,class:"text-center py-8"},Se={key:1,class:"space-y-4"},Pe={class:"font-semibold mb-2"},Ae={class:"flex flex-wrap gap-2"},Ce={key:2,class:"text-center py-8 text-muted-foreground"},De={class:"flex items-center gap-3"},Ve={class:"font-medium"},je={key:1,class:"text-center py-8 text-muted-foreground"},Re={key:0,class:"space-y-3"},Ue={class:"font-semibold"},Le={class:"text-sm text-muted-foreground mt-1"},Ne={class:"flex gap-2 mt-2"},Ee={key:1,class:"text-center py-8 text-muted-foreground"},Ze=K({__name:"Show",props:{role:{},userCount:{}},setup(L){const b=L,N=[{title:"Dashboard",href:"/dashboard"},{title:"Administración",href:"#"},{title:"Roles y Permisos",href:"/admin/roles"},{title:b.role.display_name,href:"#"}],E=()=>["super_admin","admin","manager","user","end_customer"].includes(b.role.name),B=a=>a.split(" ").map(s=>s[0]).join("").toUpperCase().slice(0,2),A=a=>new Date(a).toLocaleDateString("es-ES",{year:"numeric",month:"long",day:"numeric"}),z=()=>{if(!b.role.permissions)return{};const a={};return b.role.permissions.forEach(s=>{const[d,i]=s.split(".");a[d]||(a[d]=[]),a[d].push(i)}),a},T=a=>({users:"Usuarios",votaciones:"Votaciones",convocatorias:"Convocatorias",postulaciones:"Postulaciones",candidaturas:"Candidaturas",reports:"Reportes",settings:"Configuración",dashboard:"Dashboard",profile:"Perfil"})[a]||a,I=a=>({view:"secondary",create:"default",edit:"outline",delete:"destructive",export:"ghost"})[a]||"outline";return(a,s)=>(r(),f(J,{breadcrumbs:N},{default:l(()=>[t(e(O),{title:`Rol: ${a.role.display_name}`},null,8,["title"]),o("div",oe,[o("div",ae,[o("div",ne,[o("div",ie,[t(e(R),{class:"h-8 w-8 text-primary"})]),o("div",null,[o("h2",re,u(a.role.display_name),1),o("div",de,[t(e(v),{variant:"outline"},{default:l(()=>[n(u(a.role.name),1)]),_:1}),E()?(r(),f(e(v),{key:0,variant:"default"},{default:l(()=>s[0]||(s[0]=[n("Rol del Sistema")])),_:1})):(r(),f(e(v),{key:1,variant:"secondary"},{default:l(()=>s[1]||(s[1]=[n("Rol Personalizado")])),_:1}))])])]),o("div",ue,[t(e($),{href:`/admin/roles/${a.role.id}/edit`},{default:l(()=>[t(e(w),null,{default:l(()=>[t(e(se),{class:"mr-2 h-4 w-4"}),s[2]||(s[2]=n(" Editar "))]),_:1})]),_:1},8,["href"]),t(e($),{href:a.route("admin.roles.index")},{default:l(()=>[t(e(w),{variant:"outline"},{default:l(()=>[t(e(te),{class:"mr-2 h-4 w-4"}),s[3]||(s[3]=n(" Volver "))]),_:1})]),_:1},8,["href"])])]),o("div",me,[t(e(p),null,{default:l(()=>[t(e(_),{class:"flex flex-row items-center justify-between space-y-0 pb-2"},{default:l(()=>[t(e(g),{class:"text-sm font-medium"},{default:l(()=>s[4]||(s[4]=[n("Usuarios Asignados")])),_:1}),t(e(Q),{class:"h-4 w-4 text-muted-foreground"})]),_:1}),t(e(c),null,{default:l(()=>[o("div",fe,u(a.userCount),1),s[5]||(s[5]=o("p",{class:"text-xs text-muted-foreground"},"usuarios con este rol",-1))]),_:1})]),_:1}),t(e(p),null,{default:l(()=>[t(e(_),{class:"flex flex-row items-center justify-between space-y-0 pb-2"},{default:l(()=>[t(e(g),{class:"text-sm font-medium"},{default:l(()=>s[6]||(s[6]=[n("Permisos")])),_:1}),t(e(le),{class:"h-4 w-4 text-muted-foreground"})]),_:1}),t(e(c),null,{default:l(()=>{var d,i;return[o("div",pe,u((d=a.role.permissions)!=null&&d.includes("*")?"Todos":((i=a.role.permissions)==null?void 0:i.length)||0),1),s[7]||(s[7]=o("p",{class:"text-xs text-muted-foreground"},"permisos asignados",-1))]}),_:1})]),_:1}),t(e(p),null,{default:l(()=>[t(e(_),{class:"flex flex-row items-center justify-between space-y-0 pb-2"},{default:l(()=>[t(e(g),{class:"text-sm font-medium"},{default:l(()=>s[8]||(s[8]=[n("Segmentos")])),_:1}),t(e(F),{class:"h-4 w-4 text-muted-foreground"})]),_:1}),t(e(c),null,{default:l(()=>{var d;return[o("div",_e,u(((d=a.role.segments)==null?void 0:d.length)||0),1),s[9]||(s[9]=o("p",{class:"text-xs text-muted-foreground"},"segmentos asociados",-1))]}),_:1})]),_:1})]),t(e(W),{defaultValue:"details",class:"space-y-4"},{default:l(()=>[t(e(X),null,{default:l(()=>[t(e(k),{value:"details"},{default:l(()=>s[10]||(s[10]=[n("Detalles")])),_:1}),t(e(k),{value:"permissions"},{default:l(()=>s[11]||(s[11]=[n("Permisos")])),_:1}),t(e(k),{value:"users"},{default:l(()=>s[12]||(s[12]=[n("Usuarios")])),_:1}),t(e(k),{value:"segments"},{default:l(()=>s[13]||(s[13]=[n("Segmentos")])),_:1})]),_:1}),t(e(h),{value:"details"},{default:l(()=>[t(e(p),null,{default:l(()=>[t(e(_),null,{default:l(()=>[t(e(g),null,{default:l(()=>s[14]||(s[14]=[n("Información del Rol")])),_:1})]),_:1}),t(e(c),{class:"space-y-4"},{default:l(()=>{var d;return[o("div",ge,[o("div",null,[s[15]||(s[15]=o("p",{class:"text-sm font-medium text-muted-foreground"},"ID del Rol",-1)),o("p",ce,u(a.role.id),1)]),o("div",null,[s[16]||(s[16]=o("p",{class:"text-sm font-medium text-muted-foreground"},"Nombre Interno",-1)),o("p",ve,u(a.role.name),1)]),o("div",null,[s[17]||(s[17]=o("p",{class:"text-sm font-medium text-muted-foreground"},"Creado",-1)),o("p",xe,u(A(a.role.created_at)),1)]),o("div",null,[s[18]||(s[18]=o("p",{class:"text-sm font-medium text-muted-foreground"},"Última Actualización",-1)),o("p",ye,u(A(a.role.updated_at)),1)])]),a.role.description?(r(),m("div",be,[s[19]||(s[19]=o("p",{class:"text-sm font-medium text-muted-foreground mb-2"},"Descripción",-1)),o("p",$e,u(a.role.description),1)])):V("",!0),(d=a.role.allowed_modules)!=null&&d.length?(r(),m("div",we,[s[20]||(s[20]=o("p",{class:"text-sm font-medium text-muted-foreground mb-2"},"Módulos Permitidos",-1)),o("div",ke,[(r(!0),m(x,null,y(a.role.allowed_modules,i=>(r(),f(e(v),{key:i,variant:"outline"},{default:l(()=>[n(u(i),1)]),_:2},1024))),128))])])):V("",!0)]}),_:1})]),_:1})]),_:1}),t(e(h),{value:"permissions"},{default:l(()=>[t(e(p),null,{default:l(()=>[t(e(_),null,{default:l(()=>[t(e(g),null,{default:l(()=>s[21]||(s[21]=[n("Permisos Asignados")])),_:1}),t(e(j),null,{default:l(()=>s[22]||(s[22]=[n(" Lista detallada de permisos organizados por módulo ")])),_:1})]),_:1}),t(e(c),null,{default:l(()=>{var d,i;return[(d=a.role.permissions)!=null&&d.includes("*")?(r(),m("div",he,[t(e(R),{class:"h-12 w-12 mx-auto text-muted-foreground mb-4"}),s[23]||(s[23]=o("p",{class:"text-lg font-semibold"},"Acceso Total",-1)),s[24]||(s[24]=o("p",{class:"text-sm text-muted-foreground"},"Este rol tiene todos los permisos del sistema",-1))])):(i=a.role.permissions)!=null&&i.length?(r(),m("div",Se,[(r(!0),m(x,null,y(z(),(q,C)=>(r(),m("div",{key:C,class:"border rounded-lg p-4"},[o("h4",Pe,u(T(C)),1),o("div",Ae,[(r(!0),m(x,null,y(q,D=>(r(),f(e(v),{key:`${C}.${D}`,variant:I(D)},{default:l(()=>[n(u(D),1)]),_:2},1032,["variant"]))),128))])]))),128))])):(r(),m("div",Ce," No hay permisos asignados a este rol "))]}),_:1})]),_:1})]),_:1}),t(e(h),{value:"users"},{default:l(()=>[t(e(p),null,{default:l(()=>[t(e(_),null,{default:l(()=>[t(e(g),null,{default:l(()=>s[25]||(s[25]=[n("Usuarios con este Rol")])),_:1}),t(e(j),null,{default:l(()=>s[26]||(s[26]=[n(" Lista de usuarios que tienen asignado este rol ")])),_:1})]),_:1}),t(e(c),null,{default:l(()=>{var d;return[(d=a.role.users)!=null&&d.length?(r(),f(e(Y),{key:0},{default:l(()=>[t(e(Z),null,{default:l(()=>[t(e(U),null,{default:l(()=>[t(e(S),null,{default:l(()=>s[27]||(s[27]=[n("Usuario")])),_:1}),t(e(S),null,{default:l(()=>s[28]||(s[28]=[n("Email")])),_:1}),t(e(S),null,{default:l(()=>s[29]||(s[29]=[n("Fecha de Asignación")])),_:1}),t(e(S),{class:"text-right"},{default:l(()=>s[30]||(s[30]=[n("Acciones")])),_:1})]),_:1})]),_:1}),t(e(ee),null,{default:l(()=>[(r(!0),m(x,null,y(a.role.users,i=>(r(),f(e(U),{key:i.id},{default:l(()=>[t(e(P),null,{default:l(()=>[o("div",De,[t(e(M),{class:"h-8 w-8"},{default:l(()=>[i.avatar?(r(),f(e(G),{key:0,src:i.avatar,alt:i.name},null,8,["src","alt"])):V("",!0),t(e(H),null,{default:l(()=>[n(u(B(i.name)),1)]),_:2},1024)]),_:2},1024),o("span",Ve,u(i.name),1)])]),_:2},1024),t(e(P),null,{default:l(()=>[n(u(i.email),1)]),_:2},1024),t(e(P),null,{default:l(()=>[n(u(A(i.created_at)),1)]),_:2},1024),t(e(P),{class:"text-right"},{default:l(()=>[t(e($),{href:`/admin/users/${i.id}`},{default:l(()=>[t(e(w),{size:"sm",variant:"ghost"},{default:l(()=>s[31]||(s[31]=[n(" Ver Usuario ")])),_:1})]),_:2},1032,["href"])]),_:2},1024)]),_:2},1024))),128))]),_:1})]),_:1})):(r(),m("div",je," No hay usuarios asignados a este rol "))]}),_:1})]),_:1})]),_:1}),t(e(h),{value:"segments"},{default:l(()=>[t(e(p),null,{default:l(()=>[t(e(_),null,{default:l(()=>[t(e(g),null,{default:l(()=>s[32]||(s[32]=[n("Segmentos Asociados")])),_:1}),t(e(j),null,{default:l(()=>s[33]||(s[33]=[n(" Segmentos que delimitan el alcance de datos para este rol ")])),_:1})]),_:1}),t(e(c),null,{default:l(()=>{var d;return[(d=a.role.segments)!=null&&d.length?(r(),m("div",Re,[(r(!0),m(x,null,y(a.role.segments,i=>(r(),m("div",{key:i.id,class:"flex items-start justify-between p-4 border rounded-lg"},[o("div",null,[o("h4",Ue,u(i.name),1),o("p",Le,u(i.description||"Sin descripción"),1),o("div",Ne,[t(e(v),{variant:"outline"},{default:l(()=>[n(u(i.user_count||0)+" usuarios ",1)]),_:2},1024),t(e(v),{variant:i.is_dynamic?"default":"secondary"},{default:l(()=>[n(u(i.is_dynamic?"Dinámico":"Estático"),1)]),_:2},1032,["variant"])])]),t(e($),{href:`/admin/segments/${i.id}`},{default:l(()=>[t(e(w),{size:"sm",variant:"ghost"},{default:l(()=>s[34]||(s[34]=[n(" Ver Segmento ")])),_:1})]),_:2},1032,["href"])]))),128))])):(r(),m("div",Ee," No hay segmentos asociados a este rol "))]}),_:1})]),_:1})]),_:1})]),_:1})])]),_:1}))}});export{Ze as default};
