import{d as S,c as _,C as j,a as d,o as c,b as r,u as i,m as U,e as l,f as a,t as n,g as f,h as z,i as u,n as h,j as A,l as B,F as M}from"./app-DaeX7cdw.js";import{_ as y}from"./createLucideIcon-CjSnWMAs.js";import{_ as L,a as H,b as G,c as O}from"./index-11KoE7K9.js";import{_ as R}from"./Checkbox.vue_vue_type_script_setup_true_lang-ChzN2Ctw.js";import{_ as p,a as q}from"./Label.vue_vue_type_script_setup_true_lang-CMHm9R99.js";import{_ as J}from"./Textarea.vue_vue_type_script_setup_true_lang-Cnx2cgaS.js";import{_ as k}from"./DateTimePicker.vue_vue_type_script_setup_true_lang-CuN1rDYL.js";import{_ as K}from"./AppLayout.vue_vue_type_script_setup_true_lang-DGUFgy7V.js";import{C}from"./DialogTitle.vue_vue_type_script_setup_true_lang-D_nilgK0.js";import{C as N}from"./clock-DeWG7NZQ.js";import{A as Q}from"./arrow-left-CrKxkQJn.js";import"./index-D0dABG5H.js";import"./AppLogo.vue_vue_type_script_setup_true_lang-Cwg8ppLD.js";import"./VisuallyHidden-Dq3uFg-l.js";const W={class:"flex h-full flex-1 flex-col gap-4 rounded-xl p-4"},X={class:"flex items-center justify-between"},Y={class:"text-3xl font-bold"},Z={class:"text-muted-foreground"},ee={class:"grid gap-6 md:grid-cols-2"},ie={class:"space-y-4"},oe={key:0,class:"text-sm text-destructive mt-1"},te={key:0,class:"text-sm text-destructive mt-1"},ae={class:"space-y-4"},re={key:0,class:"text-sm text-destructive mt-1"},se={key:1,class:"text-sm text-destructive mt-1"},ne={key:0,class:"text-sm text-destructive mt-1"},le={key:1,class:"text-sm text-destructive mt-1"},ce={class:"flex items-center space-x-2"},de={key:0,class:"mt-6 p-4 bg-blue-50 rounded-lg border border-blue-200"},fe={class:"mt-2 space-y-2"},ue={class:"flex items-center gap-2 text-blue-700"},me={class:"font-medium"},_e={class:"font-medium"},pe={key:0,class:"flex items-center gap-2 text-blue-600"},he={key:1,class:"mt-4 p-3 bg-red-50 border border-red-200 rounded-lg"},ve={class:"text-red-800 text-sm"},be={class:"flex justify-between mt-8"},Se=S({__name:"Form",props:{periodo:{}},setup(F){const v=F,m=_(()=>!!v.periodo),P=[{title:"Admin",href:"/admin/dashboard"},{title:"Periodos Electorales",href:"/admin/periodos-electorales"},{title:m.value?"Editar":"Crear",href:"#"}],e=j((()=>{if(!v.periodo)return{nombre:"",descripcion:"",fecha_inicio:null,fecha_fin:null,activo:!0};const t=v.periodo;return{nombre:t.nombre||"",descripcion:t.descripcion||"",fecha_inicio:t.fecha_inicio?new Date(t.fecha_inicio):null,fecha_fin:t.fecha_fin?new Date(t.fecha_fin):null,activo:t.activo}})()),T=()=>{m.value?e.put(`/admin/periodos-electorales/${v.periodo.id}`,{onError:t=>{console.error("Errores de validación:",t)}}):e.post("/admin/periodos-electorales",{onError:t=>{console.error("Errores de validación:",t)}})},b=_(()=>{if(!e.fecha_inicio)return"";const t=e.fecha_inicio instanceof Date?e.fecha_inicio:new Date(e.fecha_inicio);return isNaN(t.getTime())?"Fecha de inicio inválida":""}),x=_(()=>{if(!e.fecha_fin||!e.fecha_inicio)return"";const t=e.fecha_inicio instanceof Date?e.fecha_inicio:new Date(e.fecha_inicio),o=e.fecha_fin instanceof Date?e.fecha_fin:new Date(e.fecha_fin);return isNaN(t.getTime())||isNaN(o.getTime())?"Fechas inválidas":o<=t?"La fecha de fin debe ser posterior a la fecha de inicio":""}),w=_(()=>{if(!e.fecha_inicio||!e.fecha_fin)return"";const t=e.fecha_inicio instanceof Date?e.fecha_inicio:new Date(e.fecha_inicio),o=e.fecha_fin instanceof Date?e.fecha_fin:new Date(e.fecha_fin);if(isNaN(t.getTime())||isNaN(o.getTime()))return"";const s=Math.ceil((o.getTime()-t.getTime())/(1e3*60*60*24));if(s<0)return"";if(s<30)return`${s} día${s!==1?"s":""}`;const E=Math.floor(s/30),D=s%30;let V=`${E} mes${E!==1?"es":""}`;return D>0&&(V+=` y ${D} día${D!==1?"s":""}`),V}),g=_(()=>{if(!e.fecha_inicio||!e.fecha_fin)return null;const t=new Date,o=e.fecha_inicio instanceof Date?e.fecha_inicio:new Date(e.fecha_inicio),s=e.fecha_fin instanceof Date?e.fecha_fin:new Date(e.fecha_fin);return isNaN(o.getTime())||isNaN(s.getTime())?null:s<t?{label:"Finalizado",color:"text-gray-600",icon:C}:o<=t&&s>=t?{label:"Vigente",color:"text-green-600",icon:N}:{label:"Próximo",color:"text-blue-600",icon:N}}),I=_(()=>e.nombre.trim().length>0&&e.fecha_inicio&&e.fecha_fin&&!b.value&&!x.value),$=t=>{if(!t)return"";const o=t instanceof Date?t:new Date(t);return isNaN(o.getTime())?"":o.toLocaleDateString("es-ES",{year:"numeric",month:"long",day:"numeric",hour:"2-digit",minute:"2-digit"})};return(t,o)=>(c(),d(M,null,[r(i(U),{title:m.value?"Editar Periodo Electoral":"Nuevo Periodo Electoral"},null,8,["title"]),r(K,{breadcrumbs:P},{default:l(()=>[a("div",W,[a("div",X,[a("div",null,[a("h1",Y,n(m.value?"Editar Periodo Electoral":"Nuevo Periodo Electoral"),1),a("p",Z,n(m.value?"Modifica los datos del periodo electoral":"Define un nuevo marco temporal para procesos electorales"),1)]),r(i(y),{variant:"outline",onClick:o[0]||(o[0]=s=>t.$inertia.visit("/admin/periodos-electorales"))},{default:l(()=>[r(i(Q),{class:"mr-2 h-4 w-4"}),o[7]||(o[7]=f(" Volver "))]),_:1})]),r(i(L),null,{default:l(()=>[r(i(H),null,{default:l(()=>[r(i(G),null,{default:l(()=>[f(n(m.value?"Datos del Periodo":"Información del Nuevo Periodo"),1)]),_:1})]),_:1}),r(i(O),{class:"space-y-6"},{default:l(()=>[a("form",{onSubmit:z(T,["prevent"])},[a("div",ee,[a("div",ie,[a("div",null,[r(i(p),{for:"nombre"},{default:l(()=>o[8]||(o[8]=[f("Nombre del Periodo *")])),_:1}),r(i(q),{id:"nombre",modelValue:i(e).nombre,"onUpdate:modelValue":o[1]||(o[1]=s=>i(e).nombre=s),placeholder:"Ej: Elecciones 2024-2028, Periodo Presidencial 2026...",class:h({"border-destructive":i(e).errors.nombre})},null,8,["modelValue","class"]),i(e).errors.nombre?(c(),d("p",oe,n(i(e).errors.nombre),1)):u("",!0)]),a("div",null,[r(i(p),{for:"descripcion"},{default:l(()=>o[9]||(o[9]=[f("Descripción (opcional)")])),_:1}),r(i(J),{id:"descripcion",modelValue:i(e).descripcion,"onUpdate:modelValue":o[2]||(o[2]=s=>i(e).descripcion=s),placeholder:"Descripción detallada del periodo electoral...",rows:"4",class:h({"border-destructive":i(e).errors.descripcion})},null,8,["modelValue","class"]),i(e).errors.descripcion?(c(),d("p",te,n(i(e).errors.descripcion),1)):u("",!0)])]),a("div",ae,[a("div",null,[r(i(p),{for:"fecha_inicio"},{default:l(()=>o[10]||(o[10]=[f("Fecha y Hora de Inicio *")])),_:1}),r(i(k),{id:"fecha_inicio",modelValue:i(e).fecha_inicio,"onUpdate:modelValue":o[3]||(o[3]=s=>i(e).fecha_inicio=s),placeholder:"Seleccionar fecha y hora de inicio",class:h({"border-destructive":i(e).errors.fecha_inicio||b.value})},null,8,["modelValue","class"]),b.value?(c(),d("p",re,n(b.value),1)):u("",!0),i(e).errors.fecha_inicio?(c(),d("p",se,n(i(e).errors.fecha_inicio),1)):u("",!0)]),a("div",null,[r(i(p),{for:"fecha_fin"},{default:l(()=>o[11]||(o[11]=[f("Fecha y Hora de Fin *")])),_:1}),r(i(k),{id:"fecha_fin",modelValue:i(e).fecha_fin,"onUpdate:modelValue":o[4]||(o[4]=s=>i(e).fecha_fin=s),placeholder:"Seleccionar fecha y hora de fin",class:h({"border-destructive":i(e).errors.fecha_fin||x.value})},null,8,["modelValue","class"]),x.value?(c(),d("p",ne,n(x.value),1)):u("",!0),i(e).errors.fecha_fin?(c(),d("p",le,n(i(e).errors.fecha_fin),1)):u("",!0)]),a("div",ce,[r(i(R),{id:"activo",checked:i(e).activo,"onUpdate:checked":o[5]||(o[5]=s=>i(e).activo=s)},null,8,["checked"]),r(i(p),{for:"activo"},{default:l(()=>o[12]||(o[12]=[f(" Periodo activo ")])),_:1})]),o[13]||(o[13]=a("p",{class:"text-xs text-muted-foreground"}," Solo los periodos activos pueden ser utilizados en convocatorias. ",-1))])]),i(e).fecha_inicio&&i(e).fecha_fin?(c(),d("div",de,[r(i(p),{class:"text-blue-800 font-medium"},{default:l(()=>o[14]||(o[14]=[f("Vista previa del periodo:")])),_:1}),a("div",fe,[a("div",ue,[r(i(C),{class:"h-4 w-4"}),a("span",me,n($(i(e).fecha_inicio)),1),o[15]||(o[15]=a("span",{class:"text-blue-500"},"→",-1)),a("span",_e,n($(i(e).fecha_fin)),1)]),w.value?(c(),d("div",pe,[r(i(N),{class:"h-4 w-4"}),a("span",null,"Duración: "+n(w.value),1)])):u("",!0),g.value?(c(),d("div",{key:1,class:h(["flex items-center gap-2",g.value.color])},[(c(),A(B(g.value.icon),{class:"h-4 w-4"})),a("span",null,"Estado: "+n(g.value.label),1)],2)):u("",!0)])])):u("",!0),i(e).errors.delete?(c(),d("div",he,[a("p",ve,n(i(e).errors.delete),1)])):u("",!0),a("div",be,[r(i(y),{variant:"outline",type:"button",onClick:o[6]||(o[6]=s=>t.$inertia.visit("/admin/periodos-electorales"))},{default:l(()=>o[16]||(o[16]=[f(" Cancelar ")])),_:1}),r(i(y),{type:"submit",disabled:i(e).processing||!I.value},{default:l(()=>[f(n(i(e).processing?"Guardando...":m.value?"Actualizar":"Crear")+" Periodo ",1)]),_:1},8,["disabled"])])],32)]),_:1})]),_:1})])]),_:1})],64))}});export{Se as default};
