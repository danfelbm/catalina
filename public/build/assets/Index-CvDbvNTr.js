import{d as M,k,j as _,o as i,e as t,b as s,f as o,u as e,m as H,P as x,g as n,a as v,i as p,z as K,t as u,F as w,r as P,n as W,W as E}from"./app-7LlKm78u.js";import{e as q,f as G,g as I,h as O,i as y,_ as Q}from"./AppLayout.vue_vue_type_script_setup_true_lang-CyoQlVBv.js";import{_ as h}from"./createLucideIcon-C3Ab61m5.js";import{_ as T,a as V,b as F,c as R}from"./index-Cmp74z6d.js";import{_ as J}from"./CardDescription.vue_vue_type_script_setup_true_lang-CiKhemwU.js";import{_ as X,a as Y,b,c as f,d as Z,e as d}from"./TableHeader.vue_vue_type_script_setup_true_lang-4AxO5XkK.js";import{e as C,U as ee}from"./DialogTitle.vue_vue_type_script_setup_true_lang-B5BWniUE.js";import{a as se}from"./Label.vue_vue_type_script_setup_true_lang-CNdlZ2bU.js";import{_ as te}from"./AdvancedFilters.vue_vue_type_script_setup_true_lang-Dys1bkax.js";import{P as le}from"./plus-BFVd6v3P.js";import{E as ae}from"./ellipsis-xMz5LUGt.js";import{E as re}from"./eye-mFpk8ekn.js";import{S as ne}from"./square-pen-avcIrZfD.js";import{T as oe}from"./trash-2-dZG6teqx.js";import"./index-BLTdg2QY.js";import"./AppLogo.vue_vue_type_script_setup_true_lang-Cne8tvjX.js";import"./VisuallyHidden-BQiVCHMw.js";import"./DialogTrigger.vue_vue_type_script_setup_true_lang-BjwO9EVv.js";import"./es-DfN3vIXC.js";import"./DateTimePicker.vue_vue_type_script_setup_true_lang-F8a1_Xg_.js";import"./loader-circle-D_A4225e.js";import"./search-CVZYmFcN.js";import"./filter-CLKZbarQ.js";import"./history-kbZGJLIp.js";import"./save-CWAm15iC.js";const ie={class:"flex h-full flex-1 flex-col gap-4 rounded-xl p-4"},ue={class:"flex items-center justify-between"},de={class:"flex gap-4"},fe={class:"flex-1"},me={key:0},_e={class:"flex items-center gap-2"},pe={class:"font-semibold"},ce={class:"text-xs text-muted-foreground"},ge={class:"text-sm text-muted-foreground max-w-xs truncate"},xe={class:"flex items-center gap-1"},ve={class:"text-sm"},he={key:0,class:"flex items-center justify-center space-x-2 mt-6"},$e={class:"flex gap-1"},Ie=M({__name:"Index",props:{roles:{},segments:{},filters:{},filterFieldsConfig:{},availablePermissions:{}},setup(B){const m=B,D=[{title:"Dashboard",href:"/dashboard"},{title:"Administración",href:"#"},{title:"Roles y Permisos",href:"/admin/roles"}],$=k(m.filters.search||""),c=k(!1),g=a=>["super_admin","admin","manager","user","end_customer"].includes(a.name),N=a=>!a||a.length===0?"Sin permisos":a.includes("*")?"Todos los permisos":`${a.length} permisos`,U=a=>!a||a.length===0?"Sin usuarios":`${a.length} usuario${a.length!==1?"s":""}`,z=a=>!a||a.length===0?"Sin segmentos":`${a.length} segmento${a.length!==1?"s":""}`,S=()=>{E.get("/admin/roles",{search:$.value},{preserveState:!0,preserveScroll:!0})},j=a=>{confirm(`¿Estás seguro de eliminar el rol "${a.display_name}"?`)&&E.delete(`/admin/roles/${a.id}`)},A=a=>!g(a),L=a=>!g(a)&&(!a.users||a.users.length===0);return(a,l)=>(i(),_(Q,{breadcrumbs:D},{default:t(()=>[s(e(H),{title:"Roles y Permisos"}),o("div",ie,[o("div",ue,[l[3]||(l[3]=o("div",null,[o("h2",{class:"text-2xl font-bold tracking-tight"},"Roles y Permisos"),o("p",{class:"text-muted-foreground"}," Gestiona los roles y permisos del sistema ")],-1)),s(e(x),{href:a.route("admin.roles.create")},{default:t(()=>[s(e(h),null,{default:t(()=>[s(e(le),{class:"mr-2 h-4 w-4"}),l[2]||(l[2]=n(" Nuevo Rol "))]),_:1})]),_:1},8,["href"])]),s(e(T),null,{default:t(()=>[s(e(V),null,{default:t(()=>[s(e(F),{class:"text-base"},{default:t(()=>l[4]||(l[4]=[n("Filtros")])),_:1})]),_:1}),s(e(R),{class:"space-y-4"},{default:t(()=>[o("div",de,[o("div",fe,[s(e(se),{modelValue:$.value,"onUpdate:modelValue":l[0]||(l[0]=r=>$.value=r),placeholder:"Buscar por nombre o descripción...",onKeyup:K(S,["enter"])},null,8,["modelValue"])]),s(e(h),{onClick:S,variant:"secondary"},{default:t(()=>l[5]||(l[5]=[n(" Buscar ")])),_:1}),s(e(h),{onClick:l[1]||(l[1]=r=>c.value=!c.value),variant:"outline"},{default:t(()=>[n(u(c.value?"Ocultar":"Mostrar")+" Filtros Avanzados ",1)]),_:1})]),c.value?(i(),v("div",me,[s(te,{fieldsConfig:a.filterFieldsConfig,baseUrl:"/admin/roles"},null,8,["fieldsConfig"])])):p("",!0)]),_:1})]),_:1}),s(e(T),null,{default:t(()=>[s(e(V),null,{default:t(()=>[s(e(F),null,{default:t(()=>l[6]||(l[6]=[n("Roles del Sistema")])),_:1}),s(e(J),null,{default:t(()=>[n(" Total de "+u(m.roles.total)+" roles registrados ",1)]),_:1})]),_:1}),s(e(R),null,{default:t(()=>[s(e(X),null,{default:t(()=>[s(e(Y),null,{default:t(()=>[s(e(b),null,{default:t(()=>[s(e(f),null,{default:t(()=>l[7]||(l[7]=[n("Rol")])),_:1}),s(e(f),null,{default:t(()=>l[8]||(l[8]=[n("Descripción")])),_:1}),s(e(f),null,{default:t(()=>l[9]||(l[9]=[n("Tipo")])),_:1}),s(e(f),null,{default:t(()=>l[10]||(l[10]=[n("Permisos")])),_:1}),s(e(f),null,{default:t(()=>l[11]||(l[11]=[n("Usuarios")])),_:1}),s(e(f),null,{default:t(()=>l[12]||(l[12]=[n("Segmentos")])),_:1}),s(e(f),{class:"text-right"},{default:t(()=>l[13]||(l[13]=[n("Acciones")])),_:1})]),_:1})]),_:1}),s(e(Z),null,{default:t(()=>[(i(!0),v(w,null,P(m.roles.data,r=>(i(),_(e(b),{key:r.id},{default:t(()=>[s(e(d),{class:"font-medium"},{default:t(()=>[o("div",_e,[s(e(q),{class:"h-4 w-4 text-muted-foreground"}),o("div",null,[o("p",pe,u(r.display_name),1),o("p",ce,u(r.name),1)])])]),_:2},1024),s(e(d),null,{default:t(()=>[o("p",ge,u(r.description||"Sin descripción"),1)]),_:2},1024),s(e(d),null,{default:t(()=>[s(e(C),{variant:g(r)?"default":"secondary"},{default:t(()=>[n(u(g(r)?"Sistema":"Personalizado"),1)]),_:2},1032,["variant"])]),_:2},1024),s(e(d),null,{default:t(()=>[s(e(C),{variant:"outline"},{default:t(()=>[n(u(N(r.permissions)),1)]),_:2},1024)]),_:2},1024),s(e(d),null,{default:t(()=>[o("div",xe,[s(e(ee),{class:"h-4 w-4 text-muted-foreground"}),o("span",ve,u(U(r.users)),1)])]),_:2},1024),s(e(d),null,{default:t(()=>[s(e(C),{variant:"ghost"},{default:t(()=>[n(u(z(r.segments)),1)]),_:2},1024)]),_:2},1024),s(e(d),{class:"text-right"},{default:t(()=>[s(e(G),null,{default:t(()=>[s(e(I),{asChild:""},{default:t(()=>[s(e(h),{variant:"ghost",size:"icon"},{default:t(()=>[s(e(ae),{class:"h-4 w-4"})]),_:1})]),_:1}),s(e(O),{align:"end"},{default:t(()=>[s(e(x),{href:`/admin/roles/${r.id}`},{default:t(()=>[s(e(y),null,{default:t(()=>[s(e(re),{class:"mr-2 h-4 w-4"}),l[14]||(l[14]=n(" Ver Detalles "))]),_:1})]),_:2},1032,["href"]),A(r)?(i(),_(e(x),{key:0,href:`/admin/roles/${r.id}/edit`},{default:t(()=>[s(e(y),null,{default:t(()=>[s(e(ne),{class:"mr-2 h-4 w-4"}),l[15]||(l[15]=n(" Editar "))]),_:1})]),_:2},1032,["href"])):p("",!0),L(r)?(i(),_(e(y),{key:1,onClick:ye=>j(r),class:"text-destructive"},{default:t(()=>[s(e(oe),{class:"mr-2 h-4 w-4"}),l[16]||(l[16]=n(" Eliminar "))]),_:2},1032,["onClick"])):p("",!0)]),_:2},1024)]),_:2},1024)]),_:2},1024)]),_:2},1024))),128)),m.roles.data.length===0?(i(),_(e(b),{key:0},{default:t(()=>[s(e(d),{colspan:"7",class:"text-center py-8 text-muted-foreground"},{default:t(()=>l[17]||(l[17]=[n(" No se encontraron roles ")])),_:1})]),_:1})):p("",!0)]),_:1})]),_:1}),m.roles.last_page>1?(i(),v("div",he,[o("nav",$e,[(i(!0),v(w,null,P(m.roles.links,r=>(i(),_(e(x),{key:r.label,href:r.url,class:W(["px-3 py-2 text-sm rounded-md",r.active?"bg-primary text-primary-foreground":"hover:bg-muted",!r.url&&"opacity-50 cursor-not-allowed"]),innerHTML:r.label,disabled:!r.url},null,8,["href","class","innerHTML","disabled"]))),128))])])):p("",!0)]),_:1})]),_:1})])]),_:1}))}});export{Ie as default};
