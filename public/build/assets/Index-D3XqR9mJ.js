import{d as q,k as $,c as R,a as u,o as r,b as t,u as s,m as E,e as a,f as i,j as f,i as p,z as A,g as n,F as g,r as y,t as c,W as b,l as H,n as K}from"./app-C-ljWtfy.js";import{_ as P}from"./AppLayout.vue_vue_type_script_setup_true_lang-DrR_52Cc.js";import{_ as k,c as w,a as U,b as W,F}from"./index-C1n5YpSv.js";import{_ as Y}from"./CardDescription.vue_vue_type_script_setup_true_lang-Dy74ld2R.js";import{c as N,_ as v}from"./createLucideIcon-_oXcxsH_.js";import{a as G}from"./Label.vue_vue_type_script_setup_true_lang-BUmVMQfq.js";import{_ as J,a as O,b as Q,c as X,d as V,e as S}from"./DialogTitle.vue_vue_type_script_setup_true_lang-Cap5hEl3.js";import{S as D}from"./search-D3FjoTWs.js";import{C as B}from"./clock-Cb6qrYV_.js";import{I as Z}from"./info-B4GIL3lJ.js";import{C as ee}from"./circle-check-big-R1DwQvLv.js";import"./index-BfIyhi4o.js";import"./AppLogo.vue_vue_type_script_setup_true_lang-DK8M-y8i.js";import"./VisuallyHidden-SZsN-sM_.js";/**
 * @license lucide-vue-next v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const se=N("ArrowRightIcon",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"m12 5 7 7-7 7",key:"xquz4c"}]]);/**
 * @license lucide-vue-next v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const te=N("FilePenIcon",[["path",{d:"M12.5 22H18a2 2 0 0 0 2-2V7l-5-5H6a2 2 0 0 0-2 2v9.5",key:"1couwa"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M13.378 15.626a1 1 0 1 0-3.004-3.004l-5.01 5.012a2 2 0 0 0-.506.854l-.837 2.87a.5.5 0 0 0 .62.62l2.87-.837a2 2 0 0 0 .854-.506z",key:"1y4qbx"}]]),ae={class:"p-6"},le={class:"flex flex-col md:flex-row gap-4"},oe={class:"flex-1"},re={class:"relative"},ie={key:0,class:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6"},ne={class:"flex items-start justify-between"},de={class:"flex-1"},ce={class:"space-y-3"},ue={key:0,class:"flex items-center gap-2"},me={class:"flex items-center gap-2"},fe={key:1,class:"text-sm text-muted-foreground"},_e={key:2,class:"text-sm text-muted-foreground"},pe={class:"mt-4 pt-4 border-t"},ve={class:"text-muted-foreground text-center max-w-md"},he={key:2,class:"mt-6 flex justify-center gap-2"},Ie=q({__name:"Index",props:{formularios:{},categorias:{},filters:{}},setup(I){const x=I,T=[{title:"Dashboard",href:"/dashboard"},{title:"Formularios",href:"#"}],_=$(x.filters.search||""),d=$(x.filters.categoria||"all"),z=R(()=>x.formularios.data.length>0),h=()=>{b.get(route("formularios.index"),{search:_.value||void 0,categoria:d.value==="all"?void 0:d.value},{preserveState:!0,preserveScroll:!0})},L=o=>{d.value=o,h()},C=()=>{_.value="",d.value="all",h()},m=o=>{if(o.usuario_ha_respondido)return{texto:"Completado",color:"success",icon:ee};if(o.tiene_borrador)return{texto:"Borrador guardado",color:"warning",icon:te};if(o.fecha_fin){const l=Math.ceil((new Date(o.fecha_fin).getTime()-new Date().getTime())/864e5);if(l<=3&&l>0)return{texto:`Cierra en ${l} días`,color:"destructive",icon:B}}return{texto:"Disponible",color:"default",icon:F}},M=o=>new Date(o).toLocaleDateString("es-ES",{day:"numeric",month:"short",year:"numeric"});return(o,l)=>(r(),u(g,null,[t(s(E),{title:"Formularios"}),t(P,{breadcrumbs:T},{default:a(()=>[i("div",ae,[l[7]||(l[7]=i("div",{class:"mb-6"},[i("h1",{class:"text-3xl font-bold"},"Formularios Disponibles"),i("p",{class:"text-muted-foreground"}," Completa los formularios que están disponibles para ti ")],-1)),t(s(k),{class:"mb-6"},{default:a(()=>[t(s(w),{class:"pt-6"},{default:a(()=>[i("div",le,[i("div",oe,[i("div",re,[t(s(D),{class:"absolute left-3 top-1/2 transform -translate-y-1/2 text-muted-foreground h-4 w-4"}),t(s(G),{modelValue:_.value,"onUpdate:modelValue":l[0]||(l[0]=e=>_.value=e),placeholder:"Buscar formularios...",class:"pl-10",onKeyup:A(h,["enter"])},null,8,["modelValue"])])]),t(s(J),{modelValue:d.value,"onUpdate:modelValue":[l[1]||(l[1]=e=>d.value=e),L]},{default:a(()=>[t(s(O),{class:"w-full md:w-[200px]"},{default:a(()=>[t(s(Q),{placeholder:"Todas las categorías"})]),_:1}),t(s(X),null,{default:a(()=>[t(s(V),{value:"all"},{default:a(()=>l[2]||(l[2]=[n("Todas las categorías")])),_:1}),(r(!0),u(g,null,y(o.categorias,e=>(r(),f(s(V),{key:e.id,value:e.id.toString()},{default:a(()=>[n(c(e.nombre),1)]),_:2},1032,["value"]))),128))]),_:1})]),_:1},8,["modelValue"]),t(s(v),{onClick:h,variant:"default"},{default:a(()=>[t(s(D),{class:"mr-2 h-4 w-4"}),l[3]||(l[3]=n(" Buscar "))]),_:1}),_.value||d.value&&d.value!=="all"?(r(),f(s(v),{key:0,onClick:C,variant:"outline"},{default:a(()=>l[4]||(l[4]=[n(" Limpiar ")])),_:1})):p("",!0)])]),_:1})]),_:1}),z.value?(r(),u("div",ie,[(r(!0),u(g,null,y(o.formularios.data,e=>(r(),f(s(k),{key:e.id,class:"hover:shadow-lg transition-shadow cursor-pointer",onClick:j=>s(b).visit(o.route("formularios.show",e.slug))},{default:a(()=>[t(s(U),null,{default:a(()=>[i("div",ne,[i("div",de,[t(s(W),{class:"line-clamp-2"},{default:a(()=>[n(c(e.titulo),1)]),_:2},1024),e.descripcion?(r(),f(s(Y),{key:0,class:"mt-2 line-clamp-2"},{default:a(()=>[n(c(e.descripcion),1)]),_:2},1024)):p("",!0)]),(r(),f(H(m(e).icon),{class:K(["h-5 w-5 ml-2",m(e).color==="success"?"text-green-600":m(e).color==="warning"?"text-yellow-600":m(e).color==="destructive"?"text-red-600":"text-muted-foreground"])},null,8,["class"]))])]),_:2},1024),t(s(w),null,{default:a(()=>[i("div",ce,[e.categoria?(r(),u("div",ue,[t(s(S),{variant:"secondary"},{default:a(()=>[n(c(e.categoria.nombre),1)]),_:2},1024)])):p("",!0),i("div",me,[t(s(S),{variant:m(e).color==="success"?"default":m(e).color==="warning"?"secondary":m(e).color==="destructive"?"destructive":"outline"},{default:a(()=>[n(c(m(e).texto),1)]),_:2},1032,["variant"])]),e.fecha_fin?(r(),u("div",fe,[t(s(B),{class:"inline h-3 w-3 mr-1"}),n(" Cierra el "+c(M(e.fecha_fin)),1)])):p("",!0),e.limite_respuestas?(r(),u("div",_e,[t(s(Z),{class:"inline h-3 w-3 mr-1"}),n(" "+c(e.respuestas_count||0)+" / "+c(e.limite_respuestas)+" respuestas ",1)])):p("",!0)]),i("div",pe,[t(s(v),{variant:"ghost",class:"w-full",disabled:e.usuario_ha_respondido},{default:a(()=>[n(c(e.usuario_ha_respondido?"Ya respondido":e.tiene_borrador?"Continuar":"Responder")+" ",1),t(s(se),{class:"ml-2 h-4 w-4"})]),_:2},1032,["disabled"])])]),_:2},1024)]),_:2},1032,["onClick"]))),128))])):(r(),f(s(k),{key:1},{default:a(()=>[t(s(w),{class:"flex flex-col items-center justify-center py-12"},{default:a(()=>[t(s(F),{class:"h-12 w-12 text-muted-foreground mb-4"}),l[6]||(l[6]=i("h3",{class:"text-lg font-semibold mb-2"},"No hay formularios disponibles",-1)),i("p",ve,c(_.value||d.value&&d.value!=="all"?"No se encontraron formularios con los filtros aplicados.":"No hay formularios disponibles en este momento. Vuelve más tarde."),1),_.value||d.value&&d.value!=="all"?(r(),f(s(v),{key:0,onClick:C,class:"mt-4",variant:"outline"},{default:a(()=>l[5]||(l[5]=[n(" Limpiar filtros ")])),_:1})):p("",!0)]),_:1})]),_:1})),o.formularios.last_page>1?(r(),u("div",he,[(r(!0),u(g,null,y(o.formularios.last_page,e=>(r(),f(s(v),{key:e,variant:e===o.formularios.current_page?"default":"outline",size:"sm",onClick:j=>s(b).get(o.route("formularios.index"),{...o.filters,page:e},{preserveState:!0})},{default:a(()=>[n(c(e),1)]),_:2},1032,["variant","onClick"]))),128))])):p("",!0)])]),_:1})],64))}});export{Ie as default};
