import{C as V,_ as E}from"./AppLayout.vue_vue_type_script_setup_true_lang-CyoQlVBv.js";import{d as T,k as w,a as p,o as d,b as t,u as e,m as q,e as a,f as o,P as C,g as n,i as g,j as S,F as y,r as I,t as r,n as R,W as b}from"./app-7LlKm78u.js";import{c as M,_ as c}from"./createLucideIcon-C3Ab61m5.js";import{_ as W,c as G}from"./index-Cmp74z6d.js";import{_ as J,a as O,b as h,c as _,d as Q,e as u}from"./TableHeader.vue_vue_type_script_setup_true_lang-4AxO5XkK.js";import{e as P}from"./DialogTitle.vue_vue_type_script_setup_true_lang-B5BWniUE.js";import{_ as H,a as K,b as X,c as Y,d as Z,e as ee,f as te,g as se}from"./AlertDialogTitle.vue_vue_type_script_setup_true_lang-D3JxLxXQ.js";import{_ as ae,C as ie}from"./AdvancedFilters.vue_vue_type_script_setup_true_lang-Dys1bkax.js";import{P as le}from"./plus-BFVd6v3P.js";import{S as oe}from"./square-pen-avcIrZfD.js";import{T as ne}from"./trash-Cg7-Y4aH.js";import"./Label.vue_vue_type_script_setup_true_lang-CNdlZ2bU.js";import"./index-BLTdg2QY.js";import"./AppLogo.vue_vue_type_script_setup_true_lang-Cne8tvjX.js";import"./VisuallyHidden-BQiVCHMw.js";import"./CardDescription.vue_vue_type_script_setup_true_lang-CiKhemwU.js";import"./DialogTrigger.vue_vue_type_script_setup_true_lang-BjwO9EVv.js";import"./es-DfN3vIXC.js";import"./DateTimePicker.vue_vue_type_script_setup_true_lang-F8a1_Xg_.js";import"./loader-circle-D_A4225e.js";import"./trash-2-dZG6teqx.js";import"./search-CVZYmFcN.js";import"./filter-CLKZbarQ.js";import"./history-kbZGJLIp.js";import"./save-CWAm15iC.js";/**
 * @license lucide-vue-next v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const re=M("PowerIcon",[["path",{d:"M12 2v10",key:"mnfbl"}],["path",{d:"M18.4 6.6a9 9 0 1 1-12.77.04",key:"obofu9"}]]),de={class:"flex h-full flex-1 flex-col gap-4 rounded-xl p-4"},ue={class:"flex items-center justify-between"},fe={class:"rounded-md border"},me={class:"font-medium"},ce={class:"text-sm text-muted-foreground"},_e={key:0,class:"text-xs text-muted-foreground"},pe=["title"],ve={class:"text-sm text-muted-foreground"},ge={class:"flex justify-end gap-1"},be={key:0,class:"flex items-center justify-between mt-4"},he={class:"text-sm text-muted-foreground"},ke={class:"flex items-center space-x-2"},xe={class:"text-sm"},$e={key:0},Qe=T({__name:"Index",props:{users:{},filters:{},filterFieldsConfig:{}},setup(U){const k=U,{route:f}=window,D=[{title:"Admin",href:"/admin/dashboard"},{title:"Usuarios",href:"/admin/usuarios"}],v=w(!1),m=w(null),A={fields:k.filterFieldsConfig||[],showQuickSearch:!0,quickSearchPlaceholder:"Buscar por nombre, email o documento...",quickSearchFields:["name","email","documento_identidad","telefono"],maxNestingLevel:2,allowSaveFilters:!0,debounceTime:500,autoApply:!1},N=i=>{b.post(f("admin.usuarios.toggle-active",i.id),{},{preserveScroll:!0})},B=i=>{m.value=i,v.value=!0},j=()=>{m.value&&b.delete(f("admin.usuarios.destroy",m.value.id),{preserveScroll:!0}),v.value=!1,m.value=null},z=i=>i==="admin"?"default":"secondary",F=i=>i?"default":"destructive",x=i=>{const s=[];return i.localidad&&s.push(i.localidad.nombre),i.municipio&&s.push(i.municipio.nombre),i.departamento&&s.push(i.departamento.nombre),i.territorio&&s.push(i.territorio.nombre),s.join(", ")||"Sin ubicación"},$=i=>{b.get(f("admin.usuarios.index"),{...k.filters,page:i},{preserveState:!0,preserveScroll:!0})};return(i,s)=>(d(),p(y,null,[t(e(q),{title:"Usuarios"}),t(E,{breadcrumbs:D},{default:a(()=>[o("div",de,[o("div",ue,[s[4]||(s[4]=o("div",null,[o("h1",{class:"text-3xl font-bold tracking-tight"},"Usuarios"),o("p",{class:"text-muted-foreground"}," Administra los usuarios del sistema ")],-1)),t(e(C),{href:e(f)("admin.usuarios.create")},{default:a(()=>[t(e(c),null,{default:a(()=>[t(e(le),{class:"mr-2 h-4 w-4"}),s[3]||(s[3]=n(" Nuevo Usuario "))]),_:1})]),_:1},8,["href"])]),t(ae,{config:A,route:e(f)("admin.usuarios.index"),"initial-filters":{quickSearch:i.filters.search,rootGroup:i.filters.advanced_filters?JSON.parse(i.filters.advanced_filters):void 0}},null,8,["route","initial-filters"]),t(e(W),null,{default:a(()=>[t(e(G),{class:"pt-6"},{default:a(()=>[o("div",fe,[t(e(J),null,{default:a(()=>[t(e(O),null,{default:a(()=>[t(e(h),null,{default:a(()=>[t(e(_),null,{default:a(()=>s[5]||(s[5]=[n("Usuario")])),_:1}),t(e(_),null,{default:a(()=>s[6]||(s[6]=[n("Rol")])),_:1}),t(e(_),null,{default:a(()=>s[7]||(s[7]=[n("Ubicación")])),_:1}),t(e(_),null,{default:a(()=>s[8]||(s[8]=[n("Estado")])),_:1}),t(e(_),null,{default:a(()=>s[9]||(s[9]=[n("Registro")])),_:1}),t(e(_),{class:"text-right"},{default:a(()=>s[10]||(s[10]=[n("Acciones")])),_:1})]),_:1})]),_:1}),t(e(Q),null,{default:a(()=>[(d(!0),p(y,null,I(i.users.data,l=>(d(),S(e(h),{key:l.id},{default:a(()=>[t(e(u),null,{default:a(()=>[o("div",null,[o("div",me,r(l.name),1),o("div",ce,r(l.email),1),l.documento_identidad?(d(),p("div",_e," Doc: "+r(l.documento_identidad),1)):g("",!0)])]),_:2},1024),t(e(u),null,{default:a(()=>[t(e(P),{variant:z(l.role)},{default:a(()=>[n(r(l.role==="admin"?"Administrador":"Usuario"),1)]),_:2},1032,["variant"])]),_:2},1024),t(e(u),null,{default:a(()=>[o("div",{class:"max-w-[200px] truncate text-sm",title:x(l)},r(x(l)),9,pe)]),_:2},1024),t(e(u),null,{default:a(()=>[t(e(P),{variant:F(l.activo)},{default:a(()=>[n(r(l.activo?"Activo":"Inactivo"),1)]),_:2},1032,["variant"])]),_:2},1024),t(e(u),null,{default:a(()=>[o("div",ve,r(new Date(l.created_at).toLocaleDateString()),1)]),_:2},1024),t(e(u),null,{default:a(()=>[o("div",ge,[t(e(C),{href:e(f)("admin.usuarios.edit",l.id)},{default:a(()=>[t(e(c),{variant:"ghost",size:"icon",class:"h-8 w-8"},{default:a(()=>[t(e(oe),{class:"h-4 w-4"})]),_:1})]),_:2},1032,["href"]),t(e(c),{variant:"ghost",size:"icon",class:"h-8 w-8",onClick:L=>N(l),title:l.activo?"Desactivar":"Activar"},{default:a(()=>[t(e(re),{class:R(["h-4 w-4",l.activo?"text-green-600":"text-gray-400"])},null,8,["class"])]),_:2},1032,["onClick","title"]),t(e(c),{variant:"ghost",size:"icon",class:"h-8 w-8 hover:text-destructive",onClick:L=>B(l)},{default:a(()=>[t(e(ne),{class:"h-4 w-4"})]),_:2},1032,["onClick"])])]),_:2},1024)]),_:2},1024))),128)),i.users.data.length===0?(d(),S(e(h),{key:0},{default:a(()=>[t(e(u),{colspan:"6",class:"text-center"},{default:a(()=>s[11]||(s[11]=[o("div",{class:"py-12 text-muted-foreground"}," No se encontraron usuarios ",-1)])),_:1})]),_:1})):g("",!0)]),_:1})]),_:1})]),i.users.last_page>1?(d(),p("div",be,[o("div",he," Mostrando "+r(i.users.from)+" a "+r(i.users.to)+" de "+r(i.users.total)+" resultados ",1),o("div",ke,[t(e(c),{variant:"outline",size:"sm",disabled:i.users.current_page===1,onClick:s[0]||(s[0]=l=>$(i.users.current_page-1))},{default:a(()=>[t(e(ie),{class:"h-4 w-4"}),s[12]||(s[12]=n(" Anterior "))]),_:1},8,["disabled"]),o("div",xe," Página "+r(i.users.current_page)+" de "+r(i.users.last_page),1),t(e(c),{variant:"outline",size:"sm",disabled:i.users.current_page===i.users.last_page,onClick:s[1]||(s[1]=l=>$(i.users.current_page+1))},{default:a(()=>[s[13]||(s[13]=n(" Siguiente ")),t(e(V),{class:"h-4 w-4"})]),_:1},8,["disabled"])])])):g("",!0)]),_:1})]),_:1})]),t(e(H),{open:v.value,"onUpdate:open":s[2]||(s[2]=l=>v.value=l)},{default:a(()=>[t(e(K),null,{default:a(()=>[t(e(X),null,{default:a(()=>[t(e(Y),null,{default:a(()=>s[14]||(s[14]=[n("¿Estás seguro?")])),_:1}),t(e(Z),null,{default:a(()=>[s[15]||(s[15]=n(" Esta acción no se puede deshacer. Se eliminará permanentemente el usuario ")),m.value?(d(),p("strong",$e,r(m.value.name),1)):g("",!0),s[16]||(s[16]=n(" del sistema. "))]),_:1})]),_:1}),t(e(ee),null,{default:a(()=>[t(e(te),null,{default:a(()=>s[17]||(s[17]=[n("Cancelar")])),_:1}),t(e(se),{onClick:j,class:"bg-destructive text-destructive-foreground"},{default:a(()=>s[18]||(s[18]=[n(" Eliminar ")])),_:1})]),_:1})]),_:1})]),_:1},8,["open"])]),_:1})],64))}});export{Qe as default};
