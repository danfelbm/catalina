import{d as J,C as K,a as _,o as f,b as s,u as e,m as Q,e as o,f as a,j as V,i as c,t as d,g as n,P,h as X,F as C,r as j,W as Y}from"./app-DxMxyGIi.js";import{V as h,_ as ee}from"./AppLayout.vue_vue_type_script_setup_true_lang-DbJ5w6pd.js";import{_ as $}from"./createLucideIcon-xPfym20I.js";import{_ as x,a as g,b as v,c as b,F as te}from"./index-v0X4dJtb.js";import{_ as w}from"./CardDescription.vue_vue_type_script_setup_true_lang-DgnDOR1X.js";import{_ as m,a as p}from"./Label.vue_vue_type_script_setup_true_lang-ZtqQUjfr.js";import{U as se,l as B,_ as D,a as F,b as N,c as G,d as I}from"./DialogTitle.vue_vue_type_script_setup_true_lang-keujMKwJ.js";import{_ as oe}from"./Switch.vue_vue_type_script_setup_true_lang-B6Q-xv7W.js";import{_ as ae,a as le,b as z,c as U}from"./TabsTrigger.vue_vue_type_script_setup_true_lang-DzedtnD6.js";import{_ as O,a as q}from"./index-GE2CMfkh.js";import{A as ne}from"./arrow-left-D9MtFtFW.js";import{S as ie}from"./save-BKmaFbyV.js";import"./index-jh-0-z8Q.js";import"./AppLogo.vue_vue_type_script_setup_true_lang-BQ8AGSZc.js";import"./VisuallyHidden-BBnR0lPC.js";import"./VisuallyHiddenInput-Ba2L8t2t.js";import"./RovingFocusItem-C8QE-sTg.js";const de={class:"flex h-full flex-1 flex-col gap-4 p-4"},re={class:"flex items-center justify-between"},ue={class:"text-muted-foreground"},me={class:"flex gap-2"},fe={class:"grid gap-4 md:grid-cols-3"},pe={class:"text-2xl font-bold"},_e={class:"text-xs text-muted-foreground"},ce={class:"text-2xl font-bold"},xe={class:"text-xs text-muted-foreground"},ge={class:"text-2xl font-bold"},ve={class:"text-xs text-muted-foreground"},be={class:"grid gap-4 md:grid-cols-2"},ye={class:"space-y-2"},Ve={key:0,class:"text-sm text-red-500"},$e={class:"space-y-2"},Ce={class:"flex"},we={key:0,class:"text-sm text-red-500"},ze={class:"space-y-2"},Ue={key:0,class:"text-sm text-red-500"},ke={class:"space-y-2"},Se={class:"flex items-center space-x-2"},Ee={class:"mt-4 rounded-lg bg-muted p-4"},Ae={class:"grid gap-2 text-sm"},Le={class:"ml-2"},Te={class:"ml-2"},Me={class:"ml-2"},Pe={class:"grid gap-4 md:grid-cols-2"},je={class:"space-y-2"},Be={class:"space-y-2"},De={class:"flex gap-2"},Fe={class:"space-y-2"},Ne={class:"space-y-2"},Ge={class:"grid gap-4 md:grid-cols-3"},Ie={class:"space-y-2"},Oe={class:"text-xs text-muted-foreground"},qe={class:"space-y-2"},Re={class:"text-xs text-muted-foreground"},We={class:"space-y-2"},Ze={class:"text-xs text-muted-foreground"},He={class:"mt-6 flex justify-end gap-4"},mt=J({__name:"Edit",props:{tenant:{},subscriptionPlans:{},timezones:{},userCount:{},votacionCount:{},convocatoriaCount:{}},setup(R){var k,S,E,A,L,T,M;const u=R,W=[{title:"Dashboard",href:"/dashboard"},{title:"Administración",href:"#"},{title:"Tenants",href:"/admin/tenants"},{title:`Editar: ${u.tenant.name}`,href:"#"}],l=K({name:u.tenant.name,subdomain:u.tenant.subdomain,subscription_plan:u.tenant.subscription_plan,active:u.tenant.active,settings:{logo:((k=u.tenant.settings)==null?void 0:k.logo)||"",primary_color:((S=u.tenant.settings)==null?void 0:S.primary_color)||"#3B82F6",otp_expiration:((E=u.tenant.settings)==null?void 0:E.otp_expiration)||10,timezone:((A=u.tenant.settings)==null?void 0:A.timezone)||"America/Bogota"},limits:{max_users:((L=u.tenant.limits)==null?void 0:L.max_users)||null,max_votaciones:((T=u.tenant.limits)==null?void 0:T.max_votaciones)||null,max_convocatorias:((M=u.tenant.limits)==null?void 0:M.max_convocatorias)||null}}),Z=()=>{l.put(`/admin/tenants/${u.tenant.id}`,{preserveScroll:!0})},H=()=>{confirm(`¿Estás seguro de eliminar el tenant "${u.tenant.name}"? Esta acción no se puede deshacer.`)&&Y.delete(`/admin/tenants/${u.tenant.id}`)};return(r,t)=>(f(),_(C,null,[s(e(Q),{title:`Editar Tenant: ${r.tenant.name}`},null,8,["title"]),s(ee,{breadcrumbs:W},{default:o(()=>[a("div",de,[a("div",re,[a("div",null,[t[12]||(t[12]=a("h2",{class:"text-3xl font-bold tracking-tight"},"Editar Tenant",-1)),a("p",ue," Modifica la configuración de "+d(r.tenant.name),1)]),a("div",me,[r.tenant.id!==1?(f(),V(e($),{key:0,onClick:H,variant:"destructive",disabled:r.userCount>0},{default:o(()=>t[13]||(t[13]=[n(" Eliminar Tenant ")])),_:1},8,["disabled"])):c("",!0),s(e(P),{href:r.route("admin.tenants.index")},{default:o(()=>[s(e($),{variant:"outline"},{default:o(()=>[s(e(ne),{class:"mr-2 h-4 w-4"}),t[14]||(t[14]=n(" Volver "))]),_:1})]),_:1},8,["href"])])]),a("div",fe,[s(e(x),null,{default:o(()=>[s(e(g),{class:"flex flex-row items-center justify-between space-y-0 pb-2"},{default:o(()=>[s(e(v),{class:"text-sm font-medium"},{default:o(()=>t[15]||(t[15]=[n("Usuarios")])),_:1}),s(e(se),{class:"h-4 w-4 text-muted-foreground"})]),_:1}),s(e(b),null,{default:o(()=>[a("div",pe,d(r.userCount),1),a("p",_e,d(e(l).limits.max_users?`de ${e(l).limits.max_users} máximo`:"Sin límite"),1)]),_:1})]),_:1}),s(e(x),null,{default:o(()=>[s(e(g),{class:"flex flex-row items-center justify-between space-y-0 pb-2"},{default:o(()=>[s(e(v),{class:"text-sm font-medium"},{default:o(()=>t[16]||(t[16]=[n("Votaciones")])),_:1}),s(e(h),{class:"h-4 w-4 text-muted-foreground"})]),_:1}),s(e(b),null,{default:o(()=>[a("div",ce,d(r.votacionCount),1),a("p",xe,d(e(l).limits.max_votaciones?`de ${e(l).limits.max_votaciones} máximo`:"Sin límite"),1)]),_:1})]),_:1}),s(e(x),null,{default:o(()=>[s(e(g),{class:"flex flex-row items-center justify-between space-y-0 pb-2"},{default:o(()=>[s(e(v),{class:"text-sm font-medium"},{default:o(()=>t[17]||(t[17]=[n("Convocatorias")])),_:1}),s(e(te),{class:"h-4 w-4 text-muted-foreground"})]),_:1}),s(e(b),null,{default:o(()=>[a("div",ge,d(r.convocatoriaCount),1),a("p",ve,d(e(l).limits.max_convocatorias?`de ${e(l).limits.max_convocatorias} máximo`:"Sin límite"),1)]),_:1})]),_:1})]),r.tenant.id===1?(f(),V(e(O),{key:0},{default:o(()=>[s(e(B),{class:"h-4 w-4"}),s(e(q),null,{default:o(()=>t[18]||(t[18]=[n(" Este es el tenant principal del sistema. Algunas opciones pueden estar limitadas. ")])),_:1})]),_:1})):c("",!0),a("form",{onSubmit:X(Z,["prevent"])},[s(e(ae),{"default-value":"general",class:"w-full"},{default:o(()=>[s(e(le),{class:"grid w-full grid-cols-3"},{default:o(()=>[s(e(z),{value:"general"},{default:o(()=>t[19]||(t[19]=[n("Información General")])),_:1}),s(e(z),{value:"settings"},{default:o(()=>t[20]||(t[20]=[n("Configuración")])),_:1}),s(e(z),{value:"limits"},{default:o(()=>t[21]||(t[21]=[n("Límites y Cuotas")])),_:1})]),_:1}),s(e(U),{value:"general"},{default:o(()=>[s(e(x),null,{default:o(()=>[s(e(g),null,{default:o(()=>[s(e(v),null,{default:o(()=>t[22]||(t[22]=[n("Información General")])),_:1}),s(e(w),null,{default:o(()=>t[23]||(t[23]=[n(" Datos básicos de la organización ")])),_:1})]),_:1}),s(e(b),{class:"space-y-4"},{default:o(()=>[a("div",be,[a("div",ye,[s(e(m),{for:"name"},{default:o(()=>t[24]||(t[24]=[n("Nombre de la Organización *")])),_:1}),s(e(p),{id:"name",modelValue:e(l).name,"onUpdate:modelValue":t[0]||(t[0]=i=>e(l).name=i),placeholder:"Mi Organización",required:""},null,8,["modelValue"]),e(l).errors.name?(f(),_("p",Ve,d(e(l).errors.name),1)):c("",!0)]),a("div",$e,[s(e(m),{for:"subdomain"},{default:o(()=>t[25]||(t[25]=[n("Subdominio *")])),_:1}),a("div",Ce,[s(e(p),{id:"subdomain",modelValue:e(l).subdomain,"onUpdate:modelValue":t[1]||(t[1]=i=>e(l).subdomain=i),placeholder:"mi-organizacion",pattern:"[a-z0-9-]+",required:"",class:"rounded-r-none"},null,8,["modelValue"]),t[26]||(t[26]=a("span",{class:"inline-flex items-center rounded-r-md border border-l-0 border-input bg-muted px-3 text-sm text-muted-foreground"}," .votaciones.test ",-1))]),t[27]||(t[27]=a("p",{class:"text-xs text-muted-foreground"}," Solo letras minúsculas, números y guiones ",-1)),e(l).errors.subdomain?(f(),_("p",we,d(e(l).errors.subdomain),1)):c("",!0)]),a("div",ze,[s(e(m),{for:"subscription_plan"},{default:o(()=>t[28]||(t[28]=[n("Plan de Suscripción *")])),_:1}),s(e(D),{modelValue:e(l).subscription_plan,"onUpdate:modelValue":t[2]||(t[2]=i=>e(l).subscription_plan=i)},{default:o(()=>[s(e(F),{id:"subscription_plan"},{default:o(()=>[s(e(N))]),_:1}),s(e(G),null,{default:o(()=>[(f(!0),_(C,null,j(r.subscriptionPlans,(i,y)=>(f(),V(e(I),{key:y,value:y},{default:o(()=>[n(d(i),1)]),_:2},1032,["value"]))),128))]),_:1})]),_:1},8,["modelValue"]),e(l).errors.subscription_plan?(f(),_("p",Ue,d(e(l).errors.subscription_plan),1)):c("",!0)]),a("div",ke,[s(e(m),{for:"active"},{default:o(()=>t[29]||(t[29]=[n("Estado")])),_:1}),a("div",Se,[s(e(oe),{id:"active",checked:e(l).active,"onUpdate:checked":t[3]||(t[3]=i=>e(l).active=i)},null,8,["checked"]),s(e(m),{for:"active",class:"font-normal"},{default:o(()=>[n(d(e(l).active?"Activo":"Inactivo"),1)]),_:1})]),t[30]||(t[30]=a("p",{class:"text-xs text-muted-foreground"}," Los tenants inactivos no pueden acceder al sistema ",-1))])]),a("div",Ee,[a("div",Ae,[a("div",null,[t[31]||(t[31]=a("span",{class:"font-medium"},"ID del Tenant:",-1)),a("span",Le,d(r.tenant.id),1)]),a("div",null,[t[32]||(t[32]=a("span",{class:"font-medium"},"Creado:",-1)),a("span",Te,d(new Date(r.tenant.created_at).toLocaleString()),1)]),a("div",null,[t[33]||(t[33]=a("span",{class:"font-medium"},"Última actualización:",-1)),a("span",Me,d(new Date(r.tenant.updated_at).toLocaleString()),1)])])])]),_:1})]),_:1})]),_:1}),s(e(U),{value:"settings"},{default:o(()=>[s(e(x),null,{default:o(()=>[s(e(g),null,{default:o(()=>[s(e(v),null,{default:o(()=>t[34]||(t[34]=[n("Configuración del Sistema")])),_:1}),s(e(w),null,{default:o(()=>t[35]||(t[35]=[n(" Personalización y configuraciones específicas ")])),_:1})]),_:1}),s(e(b),{class:"space-y-4"},{default:o(()=>[a("div",Pe,[a("div",je,[s(e(m),{for:"logo"},{default:o(()=>t[36]||(t[36]=[n("URL del Logo")])),_:1}),s(e(p),{id:"logo",modelValue:e(l).settings.logo,"onUpdate:modelValue":t[4]||(t[4]=i=>e(l).settings.logo=i),placeholder:"https://ejemplo.com/logo.png",type:"url"},null,8,["modelValue"]),t[37]||(t[37]=a("p",{class:"text-xs text-muted-foreground"}," URL de la imagen del logo de la organización ",-1))]),a("div",Be,[s(e(m),{for:"primary_color"},{default:o(()=>t[38]||(t[38]=[n("Color Primario")])),_:1}),a("div",De,[s(e(p),{id:"primary_color",modelValue:e(l).settings.primary_color,"onUpdate:modelValue":t[5]||(t[5]=i=>e(l).settings.primary_color=i),placeholder:"#3B82F6",pattern:"#[0-9A-Fa-f]{6}"},null,8,["modelValue"]),s(e(p),{type:"color",modelValue:e(l).settings.primary_color,"onUpdate:modelValue":t[6]||(t[6]=i=>e(l).settings.primary_color=i),class:"w-12 p-1"},null,8,["modelValue"])]),t[39]||(t[39]=a("p",{class:"text-xs text-muted-foreground"}," Color principal de la interfaz ",-1))]),a("div",Fe,[s(e(m),{for:"otp_expiration"},{default:o(()=>t[40]||(t[40]=[n("Expiración OTP (minutos)")])),_:1}),s(e(p),{id:"otp_expiration",modelValue:e(l).settings.otp_expiration,"onUpdate:modelValue":t[7]||(t[7]=i=>e(l).settings.otp_expiration=i),modelModifiers:{number:!0},type:"number",min:"5",max:"60",placeholder:"10"},null,8,["modelValue"]),t[41]||(t[41]=a("p",{class:"text-xs text-muted-foreground"}," Tiempo de validez del código OTP (5-60 minutos) ",-1))]),a("div",Ne,[s(e(m),{for:"timezone"},{default:o(()=>t[42]||(t[42]=[n("Zona Horaria")])),_:1}),s(e(D),{modelValue:e(l).settings.timezone,"onUpdate:modelValue":t[8]||(t[8]=i=>e(l).settings.timezone=i)},{default:o(()=>[s(e(F),{id:"timezone"},{default:o(()=>[s(e(N))]),_:1}),s(e(G),null,{default:o(()=>[(f(!0),_(C,null,j(r.timezones,(i,y)=>(f(),V(e(I),{key:y,value:y},{default:o(()=>[n(d(i),1)]),_:2},1032,["value"]))),128))]),_:1})]),_:1},8,["modelValue"]),t[43]||(t[43]=a("p",{class:"text-xs text-muted-foreground"}," Zona horaria por defecto para votaciones ",-1))])])]),_:1})]),_:1})]),_:1}),s(e(U),{value:"limits"},{default:o(()=>[s(e(x),null,{default:o(()=>[s(e(g),null,{default:o(()=>[s(e(v),null,{default:o(()=>t[44]||(t[44]=[n("Límites y Cuotas")])),_:1}),s(e(w),null,{default:o(()=>t[45]||(t[45]=[n(" Define los límites de recursos para esta organización ")])),_:1})]),_:1}),s(e(b),{class:"space-y-4"},{default:o(()=>[a("div",Ge,[a("div",Ie,[s(e(m),{for:"max_users"},{default:o(()=>t[46]||(t[46]=[n("Usuarios Máximos")])),_:1}),s(e(p),{id:"max_users",modelValue:e(l).limits.max_users,"onUpdate:modelValue":t[9]||(t[9]=i=>e(l).limits.max_users=i),modelModifiers:{number:!0},type:"number",min:"0",placeholder:"Sin límite"},null,8,["modelValue"]),a("p",Oe," Actual: "+d(r.userCount)+" usuarios ",1)]),a("div",qe,[s(e(m),{for:"max_votaciones"},{default:o(()=>t[47]||(t[47]=[n("Votaciones Máximas")])),_:1}),s(e(p),{id:"max_votaciones",modelValue:e(l).limits.max_votaciones,"onUpdate:modelValue":t[10]||(t[10]=i=>e(l).limits.max_votaciones=i),modelModifiers:{number:!0},type:"number",min:"0",placeholder:"Sin límite"},null,8,["modelValue"]),a("p",Re," Actual: "+d(r.votacionCount)+" votaciones ",1)]),a("div",We,[s(e(m),{for:"max_convocatorias"},{default:o(()=>t[48]||(t[48]=[n("Convocatorias Máximas")])),_:1}),s(e(p),{id:"max_convocatorias",modelValue:e(l).limits.max_convocatorias,"onUpdate:modelValue":t[11]||(t[11]=i=>e(l).limits.max_convocatorias=i),modelModifiers:{number:!0},type:"number",min:"0",placeholder:"Sin límite"},null,8,["modelValue"]),a("p",Ze," Actual: "+d(r.convocatoriaCount)+" convocatorias ",1)])]),r.userCount>(e(l).limits.max_users||0)&&e(l).limits.max_users?(f(),V(e(O),{key:0},{default:o(()=>[s(e(B),{class:"h-4 w-4"}),s(e(q),null,{default:o(()=>t[49]||(t[49]=[n(" El número actual de usuarios excede el límite establecido. ")])),_:1})]),_:1})):c("",!0),t[50]||(t[50]=a("div",{class:"rounded-lg bg-muted p-4"},[a("p",{class:"text-sm text-muted-foreground"},[a("strong",null,"Nota:"),n(" Los límites se aplican según el plan de suscripción. Un valor vacío significa que no hay límite establecido para ese recurso. ")])],-1))]),_:1})]),_:1})]),_:1})]),_:1}),a("div",He,[s(e(P),{href:r.route("admin.tenants.index")},{default:o(()=>[s(e($),{type:"button",variant:"outline"},{default:o(()=>t[51]||(t[51]=[n(" Cancelar ")])),_:1})]),_:1},8,["href"]),s(e($),{type:"submit",disabled:e(l).processing},{default:o(()=>[s(e(ie),{class:"mr-2 h-4 w-4"}),n(" "+d(e(l).processing?"Guardando...":"Guardar Cambios"),1)]),_:1},8,["disabled"])])],32)])]),_:1})],64))}});export{mt as default};
