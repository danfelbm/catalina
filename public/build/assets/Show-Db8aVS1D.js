import{b as Ce,_ as Ee}from"./AppLayout.vue_vue_type_script_setup_true_lang-DGUFgy7V.js";import{d as me,k as D,w as $e,p as Re,x as je,a as c,o as m,v as Ne,b as t,u as e,c as N,m as Ve,e as a,f as l,P as ae,i as y,t as u,j as v,g as r,F as R,r as F,n as O,W as Fe}from"./app-DaeX7cdw.js";import{_ as S}from"./createLucideIcon-CjSnWMAs.js";import{d as Pe,_ as w,a as k,b as C,F as q,c as E,t as Se}from"./index-11KoE7K9.js";import{_ as L}from"./CardDescription.vue_vue_type_script_setup_true_lang-D2c5TVWn.js";import{e as _,U as le,C as De,_ as oe,a as re,b as ie,c as de,d as z,X as Te,f as Le,g as Me,h as Ae,i as Ue,j as ze}from"./DialogTitle.vue_vue_type_script_setup_true_lang-D_nilgK0.js";import{_ as Q,a as X,b as M,c as x,d as K,e as b}from"./TableHeader.vue_vue_type_script_setup_true_lang-D-8H6Bdo.js";import{_ as Be,a as Ie,b as Y,c as Z}from"./TabsTrigger.vue_vue_type_script_setup_true_lang-D23NyGV_.js";import{_ as Oe,a as qe}from"./index-yxdRVCHg.js";import{_ as H,a as ne}from"./Label.vue_vue_type_script_setup_true_lang-CMHm9R99.js";import{C as He,R as We,P as Ge,L as Je,i as Qe,p as Xe,a as Ke}from"./chart-BrhGNDWt.js";import{R as Ye}from"./index-Df-KZ1qz.js";import{A as Ze}from"./arrow-left-CrKxkQJn.js";import{S as et}from"./square-pen-CVhqDomP.js";import{D as tt}from"./download-DY1DMKCt.js";import{E as ue}from"./external-link-PfngjYMr.js";import{C as st}from"./copy-CEg9dwtT.js";import{E as at}from"./eye-C_jNXRru.js";import{F as lt}from"./filter-slYbXTkk.js";import{f as ot,e as rt}from"./es-DfN3vIXC.js";import"./index-D0dABG5H.js";import"./AppLogo.vue_vue_type_script_setup_true_lang-Cwg8ppLD.js";import"./VisuallyHidden-Dq3uFg-l.js";import"./RovingFocusItem-DEx9p9eK.js";const it=me({__name:"RadarChart",props:{data:{},title:{default:""},height:{default:400},minValue:{default:1},maxValue:{default:4}},setup(W){He.register(We,Ge,Je,Qe,Xe,Ke);const f=W,G=D(),A=D({labels:[],datasets:[]}),g=D({responsive:!0,maintainAspectRatio:!1,plugins:{title:{display:!!f.title,text:f.title,font:{size:16,weight:"bold"}},legend:{display:!0,position:"bottom"},tooltip:{callbacks:{label:function(i){const j=i.parsed.r;return`${i.label}: ${j.toFixed(2)}`}}}},scales:{r:{min:f.minValue,max:f.maxValue,stepSize:.5,ticks:{display:!0,stepSize:.5,callback:function(i){return i.toString()}},grid:{color:"rgba(0, 0, 0, 0.1)"},angleLines:{color:"rgba(0, 0, 0, 0.1)"},pointLabels:{font:{size:12},color:"#374151",callback:function(i){const j=i.split(" ");if(j.length>4){const B=Math.ceil(j.length/2);return[j.slice(0,B).join(" "),j.slice(B).join(" ")]}return i}}}},animation:{duration:1e3,easing:"easeInOutQuart"}}),T=()=>{!f.data||!f.data.labels||!f.data.datasets||(A.value={labels:f.data.labels,datasets:f.data.datasets.map(i=>({...i,backgroundColor:i.backgroundColor||"rgba(251, 191, 36, 0.2)",borderColor:i.borderColor||"rgb(251, 191, 36)",borderWidth:i.borderWidth||2,pointBackgroundColor:i.pointBackgroundColor||"rgb(251, 191, 36)",pointRadius:i.pointRadius||4}))})};return $e(()=>f.data,()=>{T()},{deep:!0}),Re(()=>{je(()=>{T()})}),(i,j)=>(m(),c("div",{class:"w-full",style:Ne({height:`${i.height}px`})},[t(e(Ye),{ref_key:"chartRef",ref:G,data:A.value,options:g.value},null,8,["data","options"])],4))}}),dt=Pe(it,[["__scopeId","data-v-4dd58b73"]]),nt={class:"p-6"},ut={class:"mb-6"},mt={class:"flex items-center justify-between mb-4"},ft={class:"flex items-center gap-2"},ct={class:"text-3xl font-bold"},pt={key:0,class:"text-muted-foreground"},gt={class:"flex gap-2"},_t={class:"flex items-center gap-2"},vt={class:"flex items-center gap-2"},xt={class:"bg-gray-100 px-2 py-1 rounded text-sm"},bt={class:"flex gap-2"},yt=["href"],ht={class:"grid gap-4 md:grid-cols-2 lg:grid-cols-4"},wt={class:"text-2xl font-bold"},kt={class:"text-xs text-muted-foreground"},Ct={class:"text-2xl font-bold"},Et={class:"text-2xl font-bold"},$t={class:"text-xs text-muted-foreground"},Rt={class:"text-2xl font-bold"},jt={class:"space-y-4"},Nt={class:"space-y-2"},Vt={class:"text-sm font-medium"},Ft={class:"text-sm"},Pt={key:0,class:"text-center py-8"},St={key:2,class:"mt-4"},Dt={class:"flex items-center justify-center gap-1"},Tt=["innerHTML"],Lt={class:"sticky top-6 z-40 mb-6"},Mt={class:"backdrop-blur-lg bg-white/60 dark:bg-gray-900/80 border border-gray-200/50 dark:border-gray-700/50 rounded-xl sm:rounded-2xl shadow-lg p-3 sm:p-4"},At={class:"flex gap-4 items-end"},Ut={class:"flex items-center gap-2 shrink-0"},zt={class:"p-1.5 bg-primary/10 rounded-md"},Bt={class:"flex gap-2 items-end flex-1"},It={class:"space-y-1 flex-1"},Ot={class:"space-y-1 flex-1"},qt={class:"space-y-1 w-20"},Ht={class:"space-y-1 w-20"},Wt={class:"flex items-center gap-3 shrink-0"},Gt={class:"bg-gray-100 dark:bg-gray-800/50 rounded-md px-2.5 py-1.5 border border-gray-200/60 dark:border-gray-700/60"},Jt={class:"flex items-center gap-2"},Qt={class:"text-xs font-medium text-foreground"},Xt={class:"flex items-center gap-1"},Kt={key:0,class:"w-1.5 h-1.5 bg-primary rounded-full animate-pulse"},Yt={class:"text-xs text-muted-foreground"},Zt={class:"grid gap-6 lg:grid-cols-3"},es={class:"lg:col-span-2"},ts={class:"max-w-full break-words leading-tight"},ss={class:"max-w-full break-words leading-relaxed"},as={class:"overflow-x-auto"},ls={class:"text-xs text-muted-foreground break-words"},os={class:"text-sm leading-tight break-words"},rs={key:0,class:"space-y-6"},is={class:"grid gap-4 md:grid-cols-2"},ds={class:"font-medium"},ns={class:"space-y-6"},us={class:"mb-2"},ms={class:"text-sm font-medium text-muted-foreground"},fs={key:0,class:"text-sm text-muted-foreground mt-1"},cs={class:"mt-3"},ps={key:0,class:"p-3 bg-gray-50 rounded-md"},gs={class:"whitespace-pre-wrap"},_s={key:1,class:"p-3 bg-gray-50 rounded-md"},vs={key:2,class:"p-3 bg-gray-50 rounded-md"},xs={class:"flex flex-wrap gap-2"},bs={key:1,class:"text-muted-foreground"},ys={key:3,class:"p-3 bg-gray-50 rounded-md"},hs={class:"flex items-center gap-2"},ws={class:"text-sm text-muted-foreground"},ks={key:4,class:"p-3 bg-gray-50 rounded-md"},Cs={class:"text-sm"},Es={key:0,class:"text-center py-8"},Xs=me({__name:"Show",props:{formulario:{},respuestas:{},todas_respuestas:{}},setup(W){const f=W,G=[{title:"Dashboard",href:"/dashboard"},{title:"Admin",href:"/admin/dashboard"},{title:"Formularios",href:"/admin/formularios"},{title:f.formulario.titulo,href:"#"}],A=D("resumen"),g=D(null),T=D(!1),i=D({genero:"all",cargo_directivo:"all",edad_min:18,edad_max:56}),j=()=>{Fe.get(route("admin.formularios.edit",f.formulario.id))},B=()=>{window.location.href=route("admin.formularios.exportar",f.formulario.id)},fe=()=>{navigator.clipboard.writeText(f.formulario.url_publica).then(()=>{Se.success("URL copiada al portapapeles")})},ce=d=>{g.value=d,T.value=!0},ee=d=>ot(new Date(d),"d 'de' MMMM 'de' yyyy, HH:mm",{locale:rt}),pe=d=>({publico:"Público",autenticado:"Autenticado",con_permiso:"Con Permiso"})[d]||d,te=d=>{const s=d.toLowerCase();return s==="femenino"||s==="mujer"?"Femenino":s==="masculino"||s==="hombre"?"Masculino":d},ge=d=>d.filter(s=>{const o=s.respuestas;if(i.value.genero&&i.value.genero!=="all"&&te(o.genero)!==i.value.genero||i.value.cargo_directivo&&i.value.cargo_directivo!=="all"&&o.cargo_directivo!==i.value.cargo_directivo)return!1;const n=parseInt(o.edad);return!(n<i.value.edad_min||n>i.value.edad_max)}),_e=d=>{const s=f.formulario.configuracion_campos;if(!d.length||!s)return{};const o={};s.forEach(p=>{var $;if(($=p.category)!=null&&$.name){const h=p.category.id||"sin_categoria";o[h]||(o[h]={nombre:p.category.name,descripcion:p.category.description||null,campos:[]}),o[h].campos.push(p)}});const n={};return Object.entries(o).forEach(([p,$])=>{const h=[];if($.campos.forEach(V=>{d.forEach(U=>{const P=U.respuestas[V.id];P!==null&&!isNaN(Number(P))&&h.push(Number(P))})}),h.length>0){const U=h.reduce((P,ke)=>P+ke,0)/h.length;n[p]={id:p,nombre:$.nombre,descripcion:$.descripcion,promedio:Math.round(U*100)/100,total_respuestas:h.length,total_preguntas:$.campos.length}}}),n},ve=d=>{const s=f.formulario.configuracion_campos;if(!d.length||!s)return[];const o=[];return s.forEach(n=>{var $;if(!["rating","scale","select","radio"].includes(n.type)&&!n.options)return;const p=[];if(d.forEach(h=>{const V=h.respuestas[n.id];V!==null&&!isNaN(Number(V))&&p.push(Number(V))}),p.length>0){const V=p.reduce((U,P)=>U+P,0)/p.length;o.push({campo_id:n.id,pregunta:n.title||"Sin título",dimension:(($=n.category)==null?void 0:$.name)||"",promedio:Math.round(V*100)/100,total_respuestas:p.length})}}),o.sort((n,p)=>n.dimension===p.dimension?n.campo_id.localeCompare(p.campo_id):n.dimension.localeCompare(p.dimension)),o},xe=()=>{i.value={genero:"all",cargo_directivo:"all",edad_min:18,edad_max:56}},be=d=>({borrador:"secondary",publicado:"default",archivado:"outline"})[d]||"secondary",ye=N(()=>{const d=f.formulario.estadisticas.usuarios_unicos+f.formulario.estadisticas.visitantes_unicos;return d===0?0:Math.round(f.formulario.estadisticas.visitantes_unicos/d*100)});N(()=>f.formulario.estadisticas_por_categoria&&Object.keys(f.formulario.estadisticas_por_categoria).length>0),N(()=>f.formulario.estadisticas_por_pregunta&&f.formulario.estadisticas_por_pregunta.length>0);const J=N(()=>!f.todas_respuestas||f.todas_respuestas.length===0?[]:i.value.genero&&i.value.genero!=="all"||i.value.cargo_directivo&&i.value.cargo_directivo!=="all"||i.value.edad_min>18||i.value.edad_max<56?ge(f.todas_respuestas):f.todas_respuestas),I=N(()=>i.value.genero&&i.value.genero!=="all"||i.value.cargo_directivo&&i.value.cargo_directivo!=="all"||i.value.edad_min>18||i.value.edad_max<56?_e(J.value):f.formulario.estadisticas_por_categoria||{}),se=N(()=>i.value.genero&&i.value.genero!=="all"||i.value.cargo_directivo&&i.value.cargo_directivo!=="all"||i.value.edad_min>18||i.value.edad_max<56?ve(J.value):f.formulario.estadisticas_por_pregunta||[]),he=N(()=>{const d=I.value,s=[],o=[];return Object.values(d).forEach(n=>{s.push(n.nombre),o.push(n.promedio)}),{labels:s,datasets:[{label:"Promedio por Dimensión",data:o,borderColor:"rgb(59, 130, 246)",backgroundColor:"rgba(59, 130, 246, 0.2)",borderWidth:2,pointBackgroundColor:"rgb(59, 130, 246)",pointRadius:4}]}}),we=N(()=>{if(!f.todas_respuestas)return[];const d=new Set;return f.todas_respuestas.forEach(s=>{const o=s.respuestas.genero;o&&d.add(te(o))}),Array.from(d).sort()});return N(()=>f.formulario.datos_radar?{labels:f.formulario.datos_radar.labels,datasets:f.formulario.datos_radar.datasets}:null),(d,s)=>(m(),c(R,null,[t(e(Ve),{title:d.formulario.titulo},null,8,["title"]),t(Ee,{breadcrumbs:G},{default:a(()=>[l("div",nt,[l("div",ut,[l("div",mt,[l("div",ft,[t(e(ae),{href:d.route("admin.formularios.index")},{default:a(()=>[t(e(S),{variant:"ghost",size:"sm"},{default:a(()=>[t(e(Ze),{class:"h-4 w-4"})]),_:1})]),_:1},8,["href"]),l("div",null,[l("h1",ct,u(d.formulario.titulo),1),d.formulario.descripcion?(m(),c("p",pt,u(d.formulario.descripcion),1)):y("",!0)])]),l("div",gt,[t(e(S),{variant:"outline",onClick:j},{default:a(()=>[t(e(et),{class:"mr-2 h-4 w-4"}),s[6]||(s[6]=r(" Editar "))]),_:1}),d.formulario.estadisticas.total_respuestas>0?(m(),v(e(S),{key:0,onClick:B},{default:a(()=>[t(e(tt),{class:"mr-2 h-4 w-4"}),s[7]||(s[7]=r(" Exportar CSV "))]),_:1})):y("",!0)])]),l("div",_t,[t(e(_),{variant:be(d.formulario.estado)},{default:a(()=>[r(u(d.formulario.estado),1)]),_:1},8,["variant"]),t(e(_),{variant:"outline"},{default:a(()=>[r(u(pe(d.formulario.tipo_acceso)),1)]),_:1}),d.formulario.categoria?(m(),v(e(_),{key:0,variant:"secondary"},{default:a(()=>[r(u(d.formulario.categoria.nombre),1)]),_:1})):y("",!0),t(e(_),{variant:d.formulario.activo?"default":"destructive"},{default:a(()=>[r(u(d.formulario.activo?"Activo":"Inactivo"),1)]),_:1},8,["variant"])])]),t(e(Oe),{class:"mb-6"},{default:a(()=>[t(e(qe),{class:"flex items-center justify-between"},{default:a(()=>[l("div",vt,[t(e(ue),{class:"h-4 w-4"}),s[8]||(s[8]=l("span",{class:"font-medium"},"URL Pública:",-1)),l("code",xt,u(d.formulario.url_publica),1)]),l("div",bt,[t(e(S),{variant:"ghost",size:"sm",onClick:fe},{default:a(()=>[t(e(st),{class:"h-4 w-4"})]),_:1}),l("a",{href:d.formulario.url_publica,target:"_blank"},[t(e(S),{variant:"ghost",size:"sm"},{default:a(()=>[t(e(ue),{class:"h-4 w-4"})]),_:1})],8,yt)])]),_:1})]),_:1}),t(e(Be),{modelValue:A.value,"onUpdate:modelValue":s[4]||(s[4]=o=>A.value=o),class:"space-y-6"},{default:a(()=>[t(e(Ie),null,{default:a(()=>[t(e(Y),{value:"resumen"},{default:a(()=>s[9]||(s[9]=[r("Resumen")])),_:1}),t(e(Y),{value:"respuestas"},{default:a(()=>[r(" Respuestas ("+u(d.formulario.estadisticas.total_respuestas)+") ",1)]),_:1}),t(e(Y),{value:"estadisticas"},{default:a(()=>s[10]||(s[10]=[r("Estadísticas")])),_:1})]),_:1}),t(e(Z),{value:"resumen",class:"space-y-6"},{default:a(()=>[l("div",ht,[t(e(w),null,{default:a(()=>[t(e(k),{class:"flex flex-row items-center justify-between space-y-0 pb-2"},{default:a(()=>[t(e(C),{class:"text-sm font-medium"},{default:a(()=>s[11]||(s[11]=[r(" Total Respuestas ")])),_:1}),t(e(q),{class:"h-4 w-4 text-muted-foreground"})]),_:1}),t(e(E),null,{default:a(()=>[l("div",wt,u(d.formulario.estadisticas.total_respuestas),1),l("p",kt,u(d.formulario.estadisticas.respuestas_hoy)+" hoy ",1)]),_:1})]),_:1}),t(e(w),null,{default:a(()=>[t(e(k),{class:"flex flex-row items-center justify-between space-y-0 pb-2"},{default:a(()=>[t(e(C),{class:"text-sm font-medium"},{default:a(()=>s[12]||(s[12]=[r(" Usuarios Únicos ")])),_:1}),t(e(le),{class:"h-4 w-4 text-muted-foreground"})]),_:1}),t(e(E),null,{default:a(()=>[l("div",Ct,u(d.formulario.estadisticas.usuarios_unicos),1),s[13]||(s[13]=l("p",{class:"text-xs text-muted-foreground"}," Usuarios registrados ",-1))]),_:1})]),_:1}),t(e(w),null,{default:a(()=>[t(e(k),{class:"flex flex-row items-center justify-between space-y-0 pb-2"},{default:a(()=>[t(e(C),{class:"text-sm font-medium"},{default:a(()=>s[14]||(s[14]=[r(" Visitantes ")])),_:1}),t(e(le),{class:"h-4 w-4 text-muted-foreground"})]),_:1}),t(e(E),null,{default:a(()=>[l("div",Et,u(d.formulario.estadisticas.visitantes_unicos),1),l("p",$t,u(ye.value)+"% del total ",1)]),_:1})]),_:1}),t(e(w),null,{default:a(()=>[t(e(k),{class:"flex flex-row items-center justify-between space-y-0 pb-2"},{default:a(()=>[t(e(C),{class:"text-sm font-medium"},{default:a(()=>s[15]||(s[15]=[r(" Esta Semana ")])),_:1}),t(e(De),{class:"h-4 w-4 text-muted-foreground"})]),_:1}),t(e(E),null,{default:a(()=>[l("div",Rt,u(d.formulario.estadisticas.respuestas_semana),1),s[16]||(s[16]=l("p",{class:"text-xs text-muted-foreground"}," Respuestas ",-1))]),_:1})]),_:1})]),t(e(w),null,{default:a(()=>[t(e(k),null,{default:a(()=>[t(e(C),null,{default:a(()=>s[17]||(s[17]=[r("Configuración del Formulario")])),_:1}),t(e(L),null,{default:a(()=>s[18]||(s[18]=[r(" Estructura y campos del formulario ")])),_:1})]),_:1}),t(e(E),null,{default:a(()=>[l("div",jt,[l("div",null,[s[20]||(s[20]=l("h4",{class:"font-medium mb-2"},"Campos del formulario:",-1)),l("div",Nt,[(m(!0),c(R,null,F(d.formulario.configuracion_campos,(o,n)=>(m(),c("div",{key:o.id,class:"flex items-center gap-2 p-2 bg-gray-50 rounded"},[l("span",Vt,u(n+1)+".",1),l("span",Ft,u(o.title),1),t(e(_),{variant:"outline",class:"text-xs"},{default:a(()=>[r(u(o.type),1)]),_:2},1024),o.required?(m(),v(e(_),{key:0,variant:"destructive",class:"text-xs"},{default:a(()=>s[19]||(s[19]=[r(" Requerido ")])),_:1})):y("",!0)]))),128))])])])]),_:1})]),_:1})]),_:1}),t(e(Z),{value:"respuestas",class:"space-y-6"},{default:a(()=>[t(e(w),null,{default:a(()=>[t(e(k),null,{default:a(()=>[t(e(C),null,{default:a(()=>s[21]||(s[21]=[r("Respuestas Recibidas")])),_:1}),t(e(L),null,{default:a(()=>s[22]||(s[22]=[r(" Lista de todas las respuestas enviadas ")])),_:1})]),_:1}),t(e(E),null,{default:a(()=>[d.respuestas.data.length===0?(m(),c("div",Pt,[t(e(q),{class:"mx-auto h-12 w-12 text-gray-400 mb-4"}),s[23]||(s[23]=l("p",{class:"text-muted-foreground"}," No hay respuestas aún ",-1))])):(m(),v(e(Q),{key:1},{default:a(()=>[t(e(X),null,{default:a(()=>[t(e(M),null,{default:a(()=>[t(e(x),null,{default:a(()=>s[24]||(s[24]=[r("Código")])),_:1}),t(e(x),null,{default:a(()=>s[25]||(s[25]=[r("Nombre")])),_:1}),t(e(x),null,{default:a(()=>s[26]||(s[26]=[r("Email")])),_:1}),t(e(x),null,{default:a(()=>s[27]||(s[27]=[r("Tipo")])),_:1}),t(e(x),null,{default:a(()=>s[28]||(s[28]=[r("Tiempo")])),_:1}),t(e(x),null,{default:a(()=>s[29]||(s[29]=[r("Fecha")])),_:1}),t(e(x),null,{default:a(()=>s[30]||(s[30]=[r("Acciones")])),_:1})]),_:1})]),_:1}),t(e(K),null,{default:a(()=>[(m(!0),c(R,null,F(d.respuestas.data,o=>(m(),v(e(M),{key:o.id},{default:a(()=>[t(e(b),{class:"font-mono text-xs"},{default:a(()=>[r(u(o.codigo_confirmacion),1)]),_:2},1024),t(e(b),{class:"whitespace-normal break-words"},{default:a(()=>[r(u(o.nombre),1)]),_:2},1024),t(e(b),{class:"whitespace-normal break-words"},{default:a(()=>[r(u(o.email||"-"),1)]),_:2},1024),t(e(b),null,{default:a(()=>[t(e(_),{variant:"outline"},{default:a(()=>[r(u(o.es_visitante?"Visitante":"Usuario"),1)]),_:2},1024)]),_:2},1024),t(e(b),null,{default:a(()=>[r(u(o.tiempo_llenado||"-"),1)]),_:2},1024),t(e(b),{class:"text-sm"},{default:a(()=>[r(u(ee(o.enviado_en)),1)]),_:2},1024),t(e(b),null,{default:a(()=>[t(e(S),{variant:"ghost",size:"sm",onClick:n=>ce(o)},{default:a(()=>[t(e(at),{class:"h-4 w-4"})]),_:2},1032,["onClick"])]),_:2},1024)]),_:2},1024))),128))]),_:1})]),_:1})),d.respuestas.links&&d.respuestas.links.length>3?(m(),c("div",St,[l("nav",Dt,[(m(!0),c(R,null,F(d.respuestas.links,o=>(m(),c(R,{key:o.label},[o.url?(m(),v(e(ae),{key:0,href:o.url,class:O(["px-3 py-2 text-sm rounded-md",o.active?"bg-primary text-primary-foreground":"bg-white hover:bg-gray-50 border"]),innerHTML:o.label},null,8,["href","class","innerHTML"])):(m(),c("span",{key:1,class:"px-3 py-2 text-sm text-gray-400",innerHTML:o.label},null,8,Tt))],64))),128))])])):y("",!0)]),_:1})]),_:1})]),_:1}),t(e(Z),{value:"estadisticas",class:"space-y-6"},{default:a(()=>{var o;return[l("div",Lt,[l("div",Mt,[l("div",At,[l("div",Ut,[l("div",zt,[t(e(lt),{class:"h-3.5 w-3.5 text-primary"})]),s[31]||(s[31]=l("div",null,[l("h3",{class:"font-semibold text-xs text-foreground"},"Filtros")],-1))]),l("div",Bt,[l("div",It,[t(e(H),{for:"genero",class:"text-xs font-medium"},{default:a(()=>s[32]||(s[32]=[r("Género")])),_:1}),t(e(oe),{modelValue:i.value.genero,"onUpdate:modelValue":s[0]||(s[0]=n=>i.value.genero=n)},{default:a(()=>[t(e(re),{id:"genero",class:"h-8 text-xs w-full"},{default:a(()=>[t(e(ie),{placeholder:"Todos"})]),_:1}),t(e(de),null,{default:a(()=>[t(e(z),{value:"all",class:"text-xs"},{default:a(()=>s[33]||(s[33]=[r("Todos los géneros")])),_:1}),(m(!0),c(R,null,F(we.value,n=>(m(),v(e(z),{key:n,value:n,class:"text-xs"},{default:a(()=>[r(u(n),1)]),_:2},1032,["value"]))),128))]),_:1})]),_:1},8,["modelValue"])]),l("div",Ot,[t(e(H),{for:"cargo",class:"text-xs font-medium"},{default:a(()=>s[34]||(s[34]=[r("Cargo Directivo")])),_:1}),t(e(oe),{modelValue:i.value.cargo_directivo,"onUpdate:modelValue":s[1]||(s[1]=n=>i.value.cargo_directivo=n)},{default:a(()=>[t(e(re),{id:"cargo",class:"h-8 text-xs w-full"},{default:a(()=>[t(e(ie),{placeholder:"Todos"})]),_:1}),t(e(de),null,{default:a(()=>[t(e(z),{value:"all",class:"text-xs"},{default:a(()=>s[35]||(s[35]=[r("Todos los cargos")])),_:1}),t(e(z),{value:"Si",class:"text-xs"},{default:a(()=>s[36]||(s[36]=[r("Sí")])),_:1}),t(e(z),{value:"No",class:"text-xs"},{default:a(()=>s[37]||(s[37]=[r("No")])),_:1})]),_:1})]),_:1},8,["modelValue"])]),l("div",qt,[t(e(H),{for:"edad-min",class:"text-xs font-medium"},{default:a(()=>s[38]||(s[38]=[r("Edad Mín.")])),_:1}),t(e(ne),{id:"edad-min",type:"number",modelValue:i.value.edad_min,"onUpdate:modelValue":s[2]||(s[2]=n=>i.value.edad_min=n),modelModifiers:{number:!0},min:18,max:56,placeholder:"18",class:"h-8 text-xs w-full"},null,8,["modelValue"])]),l("div",Ht,[t(e(H),{for:"edad-max",class:"text-xs font-medium"},{default:a(()=>s[39]||(s[39]=[r("Edad Máx.")])),_:1}),t(e(ne),{id:"edad-max",type:"number",modelValue:i.value.edad_max,"onUpdate:modelValue":s[3]||(s[3]=n=>i.value.edad_max=n),modelModifiers:{number:!0},min:18,max:56,placeholder:"56",class:"h-8 text-xs w-full"},null,8,["modelValue"])])]),l("div",Wt,[l("div",Gt,[l("div",Jt,[l("div",Qt,u(J.value.length)+" de "+u(((o=f.todas_respuestas)==null?void 0:o.length)||0),1),l("div",Xt,[i.value.genero&&i.value.genero!=="all"||i.value.cargo_directivo&&i.value.cargo_directivo!=="all"||i.value.edad_min>18||i.value.edad_max<56?(m(),c("div",Kt)):y("",!0),l("span",Yt,u(i.value.genero&&i.value.genero!=="all"||i.value.cargo_directivo&&i.value.cargo_directivo!=="all"||i.value.edad_min>18||i.value.edad_max<56?"Filtrado":"Sin filtros"),1)])])]),t(e(S),{variant:"outline",size:"sm",onClick:xe,class:"flex items-center gap-1.5 text-xs h-8"},{default:a(()=>[t(e(Te),{class:"h-3 w-3"}),s[40]||(s[40]=r(" Limpiar "))]),_:1})])])])]),Object.keys(I.value).length>0?(m(),v(e(w),{key:0},{default:a(()=>[t(e(k),null,{default:a(()=>[t(e(C),{class:"flex items-center gap-2"},{default:a(()=>[t(e(Ce),{class:"h-5 w-5"}),s[41]||(s[41]=r(" Análisis por Dimensiones "))]),_:1}),t(e(L),null,{default:a(()=>s[42]||(s[42]=[r(" Promedio de respuestas por categoría/dimensión ")])),_:1})]),_:1}),t(e(E),null,{default:a(()=>[t(dt,{data:he.value,title:"",height:400,"min-value":1,"max-value":4},null,8,["data"])]),_:1})]),_:1})):y("",!0),Object.keys(I.value).length>0?(m(),v(e(w),{key:1},{default:a(()=>[t(e(k),null,{default:a(()=>[t(e(C),null,{default:a(()=>s[43]||(s[43]=[r("Estadísticas Detalladas por Dimensión")])),_:1}),t(e(L),null,{default:a(()=>s[44]||(s[44]=[r(" Análisis numérico de cada categoría/dimensión ")])),_:1})]),_:1}),t(e(E),null,{default:a(()=>[l("div",Zt,[l("div",es,[t(e(Q),{class:"table-fixed w-full overflow-hidden"},{default:a(()=>[t(e(X),null,{default:a(()=>[t(e(M),null,{default:a(()=>[t(e(x),{class:"w-1/3"},{default:a(()=>s[45]||(s[45]=[r("Dimensión")])),_:1}),t(e(x),{class:"text-center w-24"},{default:a(()=>s[46]||(s[46]=[r("Promedio")])),_:1}),t(e(x),{class:"text-center w-24"},{default:a(()=>s[47]||(s[47]=[r("Preguntas")])),_:1}),t(e(x),{class:"w-2/5"},{default:a(()=>s[48]||(s[48]=[r("Descripción")])),_:1})]),_:1})]),_:1}),t(e(K),null,{default:a(()=>[(m(!0),c(R,null,F(I.value,(n,p)=>(m(),v(e(M),{key:p},{default:a(()=>[t(e(b),{class:"font-medium w-1/3 whitespace-normal"},{default:a(()=>[l("div",ts,u(n.nombre),1)]),_:2},1024),t(e(b),{class:"text-center"},{default:a(()=>[t(e(_),{class:O(["font-mono text-white",n.promedio>3.3?"bg-green-600":n.promedio>=3?"bg-blue-500":n.promedio>=2.7?"bg-orange-500":"bg-red-600"]),variant:"outline"},{default:a(()=>[r(u(n.promedio),1)]),_:2},1032,["class"])]),_:2},1024),t(e(b),{class:"text-center"},{default:a(()=>[r(u(n.total_preguntas),1)]),_:2},1024),t(e(b),{class:"text-sm text-muted-foreground w-2/5 whitespace-normal"},{default:a(()=>[l("div",ss,u(n.descripcion||"-"),1)]),_:2},1024)]),_:2},1024))),128))]),_:1})]),_:1})]),s[49]||(s[49]=l("div",{class:"lg:col-span-1"},[l("div",{class:"bg-gray-50 dark:bg-gray-900/50 rounded-lg p-4"},[l("h4",{class:"font-semibold text-sm mb-3 text-center"},"INTERPRETACIÓN DE RESULTADOS"),l("div",{class:"space-y-0 text-xs border border-gray-200 dark:border-gray-700 rounded-md overflow-hidden"},[l("div",{class:"grid grid-cols-2 bg-teal-600 text-white"},[l("div",{class:"px-2 py-1.5 font-semibold text-center border-r border-white/30"},"MEDIA"),l("div",{class:"px-2 py-1.5 font-semibold text-center"},"Interpretación")]),l("div",{class:"grid grid-cols-2 bg-green-600 text-white"},[l("div",{class:"px-2 py-1.5 text-center font-medium border-r border-white/30"},"> 3.3"),l("div",{class:"px-2 py-1.5 text-center text-xs"},"Buen Nivel. Permite mantener y mejorar continuamente")]),l("div",{class:"grid grid-cols-2 bg-blue-500 text-white"},[l("div",{class:"px-2 py-1.5 text-center font-medium border-r border-white/30"},"3 a 3.3"),l("div",{class:"px-2 py-1.5 text-center text-xs"},"Buen nivel con ligera necesidad de mejora")]),l("div",{class:"grid grid-cols-2 bg-orange-500 text-white"},[l("div",{class:"px-2 py-1.5 text-center font-medium border-r border-white/30"},"2.7 a 2.99"),l("div",{class:"px-2 py-1.5 text-center text-xs"},"Nivel bajo, con necesidad de mejora")]),l("div",{class:"grid grid-cols-2 bg-red-600 text-white"},[l("div",{class:"px-2 py-1.5 text-center font-medium border-r border-white/30"},"< 2.7"),l("div",{class:"px-2 py-1.5 text-center text-xs"},"Nivel muy bajo con gran necesidad de mejora")])])])],-1))])]),_:1})]),_:1})):y("",!0),se.value.length>0?(m(),v(e(w),{key:2},{default:a(()=>[t(e(k),null,{default:a(()=>[t(e(C),null,{default:a(()=>s[50]||(s[50]=[r("Estadísticas por Pregunta Individual")])),_:1}),t(e(L),null,{default:a(()=>s[51]||(s[51]=[r(" Promedio y detalles por cada pregunta del formulario ")])),_:1})]),_:1}),t(e(E),null,{default:a(()=>[s[55]||(s[55]=l("div",{class:"mb-6 flex justify-center"},[l("div",{class:"inline-block bg-gray-50 dark:bg-gray-900/50 rounded-lg p-4"},[l("h4",{class:"font-semibold text-sm mb-3 text-center"},"INTERPRETACIÓN DE RESULTADOS"),l("div",{class:"text-xs border border-gray-200 dark:border-gray-700 rounded-md overflow-hidden"},[l("div",{class:"grid grid-cols-2 bg-teal-600 text-white"},[l("div",{class:"px-3 py-2 font-semibold text-center border-r border-white/30"},"MEDIA"),l("div",{class:"px-3 py-2 font-semibold text-center"},"Interpretación")]),l("div",{class:"grid grid-cols-2 bg-green-600 text-white"},[l("div",{class:"px-3 py-2 text-center font-medium border-r border-white/30"},"> 3.3"),l("div",{class:"px-3 py-2 text-center"},"Buen Nivel. Permite mantener y mejorar continuamente")]),l("div",{class:"grid grid-cols-2 bg-blue-500 text-white"},[l("div",{class:"px-3 py-2 text-center font-medium border-r border-white/30"},"3 a 3.3"),l("div",{class:"px-3 py-2 text-center"},"Buen nivel con ligera necesidad de mejora")]),l("div",{class:"grid grid-cols-2 bg-orange-500 text-white"},[l("div",{class:"px-3 py-2 text-center font-medium border-r border-white/30"},"2.7 a 2.99"),l("div",{class:"px-3 py-2 text-center"},"Nivel bajo, con necesidad de mejora")]),l("div",{class:"grid grid-cols-2 bg-red-600 text-white"},[l("div",{class:"px-3 py-2 text-center font-medium border-r border-white/30"},"< 2.7"),l("div",{class:"px-3 py-2 text-center"},"Nivel muy bajo con gran necesidad de mejora")])])])],-1)),l("div",as,[t(e(Q),{class:"min-w-full"},{default:a(()=>[t(e(X),null,{default:a(()=>[t(e(M),null,{default:a(()=>[t(e(x),{class:"w-1/4"},{default:a(()=>s[52]||(s[52]=[r("Dimensión")])),_:1}),t(e(x),{class:"w-2/3"},{default:a(()=>s[53]||(s[53]=[r("Pregunta")])),_:1}),t(e(x),{class:"text-center w-1/12"},{default:a(()=>s[54]||(s[54]=[r("Promedio")])),_:1})]),_:1})]),_:1}),t(e(K),null,{default:a(()=>[(m(!0),c(R,null,F(se.value,n=>(m(),v(e(M),{key:n.campo_id},{default:a(()=>[t(e(b),{class:"font-medium whitespace-normal"},{default:a(()=>[l("div",ls,u(n.dimension||"Sin dimensión"),1)]),_:2},1024),t(e(b),{class:"whitespace-normal"},{default:a(()=>[l("div",os,u(n.pregunta),1)]),_:2},1024),t(e(b),{class:"text-center"},{default:a(()=>[t(e(_),{class:O(["font-mono text-sm text-white",n.promedio>3.3?"bg-green-600":n.promedio>=3?"bg-blue-500":n.promedio>=2.7?"bg-orange-500":"bg-red-600"]),variant:"outline"},{default:a(()=>[r(u(n.promedio),1)]),_:2},1032,["class"])]),_:2},1024)]),_:2},1024))),128))]),_:1})]),_:1})])]),_:1})]),_:1})):y("",!0)]}),_:1})]),_:1},8,["modelValue"])]),t(e(Le),{open:T.value,"onUpdate:open":s[5]||(s[5]=o=>T.value=o)},{default:a(()=>[t(e(Me),{class:"max-w-4xl max-h-[90vh] overflow-y-auto"},{default:a(()=>[t(e(Ae),null,{default:a(()=>[t(e(Ue),{class:"flex items-center gap-2"},{default:a(()=>[t(e(q),{class:"h-5 w-5"}),s[56]||(s[56]=r(" Detalle de Respuesta "))]),_:1}),t(e(ze),null,{default:a(()=>{var o;return[r(" Código: "+u((o=g.value)==null?void 0:o.codigo_confirmacion),1)]}),_:1})]),_:1}),g.value?(m(),c("div",rs,[t(e(w),null,{default:a(()=>[t(e(k),null,{default:a(()=>[t(e(C),{class:"text-lg"},{default:a(()=>s[57]||(s[57]=[r("Información del Usuario")])),_:1})]),_:1}),t(e(E),null,{default:a(()=>[l("div",is,[l("div",null,[s[58]||(s[58]=l("label",{class:"text-sm font-medium text-muted-foreground"},"Nombre",-1)),l("p",ds,u(g.value.nombre),1)]),l("div",null,[s[59]||(s[59]=l("label",{class:"text-sm font-medium text-muted-foreground"},"Email",-1)),l("p",null,u(g.value.email||"No proporcionado"),1)]),l("div",null,[s[60]||(s[60]=l("label",{class:"text-sm font-medium text-muted-foreground"},"Documento",-1)),l("p",null,u(g.value.documento||"No proporcionado"),1)]),l("div",null,[s[61]||(s[61]=l("label",{class:"text-sm font-medium text-muted-foreground"},"Tipo de Usuario",-1)),t(e(_),{variant:"outline"},{default:a(()=>[r(u(g.value.es_visitante?"Visitante":"Usuario Registrado"),1)]),_:1})]),l("div",null,[s[62]||(s[62]=l("label",{class:"text-sm font-medium text-muted-foreground"},"Tiempo de Llenado",-1)),l("p",null,u(g.value.tiempo_llenado||"No medido"),1)]),l("div",null,[s[63]||(s[63]=l("label",{class:"text-sm font-medium text-muted-foreground"},"Fecha de Envío",-1)),l("p",null,u(ee(g.value.enviado_en)),1)])])]),_:1})]),_:1}),t(e(w),null,{default:a(()=>[t(e(k),null,{default:a(()=>[t(e(C),{class:"text-lg"},{default:a(()=>s[64]||(s[64]=[r("Respuestas del Formulario")])),_:1}),t(e(L),null,{default:a(()=>s[65]||(s[65]=[r(" Detalle de todas las respuestas proporcionadas ")])),_:1})]),_:1}),t(e(E),null,{default:a(()=>[l("div",ns,[(m(!0),c(R,null,F(d.formulario.configuracion_campos,(o,n)=>(m(),c("div",{key:o.id,class:"border-b pb-4 last:border-b-0"},[l("div",us,[l("label",ms,[r(u(n+1)+". "+u(o.title)+" ",1),o.required?(m(),v(e(_),{key:0,variant:"destructive",class:"ml-1 text-xs"},{default:a(()=>s[66]||(s[66]=[r(" Requerido ")])),_:1})):y("",!0),t(e(_),{variant:"outline",class:"ml-1 text-xs"},{default:a(()=>[r(u(o.type),1)]),_:2},1024)]),o.description?(m(),c("p",fs,u(o.description),1)):y("",!0)]),l("div",cs,[["text","textarea","email","number"].includes(o.type)?(m(),c("div",ps,[l("p",gs,u(g.value.respuestas[o.id]||"Sin respuesta"),1)])):["select","radio"].includes(o.type)?(m(),c("div",_s,[t(e(_),{variant:"secondary"},{default:a(()=>[r(u(g.value.respuestas[o.id]||"Sin selección"),1)]),_:2},1024)])):o.type==="checkbox"?(m(),c("div",vs,[l("div",xs,[Array.isArray(g.value.respuestas[o.id])&&g.value.respuestas[o.id].length>0?(m(!0),c(R,{key:0},F(g.value.respuestas[o.id],p=>(m(),v(e(_),{key:p,variant:"secondary"},{default:a(()=>[r(u(p),1)]),_:2},1024))),128)):(m(),c("span",bs,"Sin selecciones"))])])):["rating","scale"].includes(o.type)?(m(),c("div",ys,[l("div",hs,[t(e(_),{class:O(["font-mono text-white",g.value.respuestas[o.id]>=4?"bg-green-600":g.value.respuestas[o.id]>=3?"bg-blue-500":g.value.respuestas[o.id]>=2?"bg-orange-500":"bg-red-600"]),variant:"outline"},{default:a(()=>[r(u(g.value.respuestas[o.id]||"Sin puntuación"),1)]),_:2},1032,["class"]),l("span",ws," / "+u(o.max_value||o.scale_max||5),1)])])):(m(),c("div",ks,[l("p",Cs,u(JSON.stringify(g.value.respuestas[o.id])||"Sin respuesta"),1)]))])]))),128)),!d.formulario.configuracion_campos||d.formulario.configuracion_campos.length===0?(m(),c("div",Es,[t(e(q),{class:"mx-auto h-12 w-12 text-gray-400 mb-4"}),s[67]||(s[67]=l("p",{class:"text-muted-foreground"},"No hay campos configurados en este formulario",-1))])):y("",!0)])]),_:1})]),_:1})])):y("",!0)]),_:1})]),_:1},8,["open"])]),_:1})],64))}});export{Xs as default};
