import{e as w,C as D}from"./DialogTitle.vue_vue_type_script_setup_true_lang-Cap5hEl3.js";import{_ as v}from"./createLucideIcon-_oXcxsH_.js";import{_ as f,a as x,b as y,c as p}from"./index-C1n5YpSv.js";import{_ as u}from"./Label.vue_vue_type_script_setup_true_lang-BUmVMQfq.js";import{_ as A}from"./Separator.vue_vue_type_script_setup_true_lang-BCs_GmPt.js";import{M as j,_ as E}from"./AppLayout.vue_vue_type_script_setup_true_lang-DrR_52Cc.js";import{d as F,k as I,a as c,o as d,b as t,u as e,m as N,e as a,f as s,g as n,t as r,i as _,n as R,F as C,r as z,j as H,W as L}from"./app-C-ljWtfy.js";import{C as h}from"./circle-check-big-R1DwQvLv.js";import{A as P}from"./arrow-left-CpNmfABz.js";import{H as q}from"./hash-DFz1sxXS.js";import{C as W}from"./copy-B1Q5c0ww.js";import"./VisuallyHidden-SZsN-sM_.js";import"./index-BfIyhi4o.js";import"./AppLogo.vue_vue_type_script_setup_true_lang-DK8M-y8i.js";const O={class:"flex h-full flex-1 flex-col gap-6 rounded-xl p-4"},U={class:"flex items-center justify-between"},G={class:"text-3xl font-bold flex items-center gap-2"},J={class:"space-y-4"},K={key:0,class:"text-muted-foreground"},Q={class:"flex flex-wrap gap-4 text-sm"},X={class:"flex items-center gap-2"},Y={class:"flex items-center gap-2 text-muted-foreground"},Z={class:"grid grid-cols-1 md:grid-cols-2 gap-6"},tt={class:"space-y-4"},et={class:"text-lg"},st={class:"text-lg font-mono"},ot={class:"space-y-4"},at={class:"text-lg font-mono"},it={class:"flex items-center gap-2 mb-2"},nt={class:"text-xs font-mono bg-muted p-2 rounded flex-1 break-all"},rt={class:"flex gap-2"},lt={class:"space-y-6"},dt={class:"flex items-start justify-between"},ct={class:"flex-1"},ut={key:0,class:"text-red-500"},mt={key:0,class:"text-sm text-muted-foreground mt-1"},ft={class:"bg-muted/30 rounded-lg p-4"},pt={class:"text-lg"},_t={class:"flex items-start gap-3"},Bt=F({__name:"MiVoto",props:{votacion:{},voto:{}},setup(V){const k=V,$=[{title:"Dashboard",href:"/dashboard"},{title:"Mis Votaciones",href:"/votaciones"},{title:"Mi Voto",href:"#"}],m=I(!1),T=()=>{L.get("/votaciones")},M=async()=>{try{await navigator.clipboard.writeText(k.voto.token_unico),m.value=!0,setTimeout(()=>{m.value=!1},2e3)}catch(i){console.error("Error al copiar token:",i)}},S=()=>{const i=`/verificar-token/${encodeURIComponent(k.voto.token_unico)}`;window.open(i,"_blank")},g=i=>new Date(i).toLocaleDateString("es-ES",{year:"numeric",month:"long",day:"numeric",hour:"2-digit",minute:"2-digit",second:"2-digit"}),B=(i,o)=>!o&&o!==0?"Sin respuesta":i.type==="checkbox"?Array.isArray(o)&&o.length>0?o.join(", "):"Sin respuesta":o.toString();return(i,o)=>(d(),c(C,null,[t(e(N),{title:`Mi Voto: ${i.votacion.titulo}`},null,8,["title"]),t(E,{breadcrumbs:$},{default:a(()=>[s("div",O,[s("div",U,[s("div",null,[s("h1",G,[t(e(h),{class:"h-8 w-8 text-green-600"}),o[0]||(o[0]=n(" Mi Voto "))]),o[1]||(o[1]=s("p",{class:"text-muted-foreground"}," Resumen de tu participación en esta votación ",-1))]),t(e(v),{variant:"outline",onClick:T},{default:a(()=>[t(e(P),{class:"mr-2 h-4 w-4"}),o[2]||(o[2]=n(" Volver "))]),_:1})]),t(e(f),null,{default:a(()=>[t(e(x),null,{default:a(()=>[t(e(y),null,{default:a(()=>[n(r(i.votacion.titulo),1)]),_:1})]),_:1}),t(e(p),null,{default:a(()=>[s("div",J,[i.votacion.descripcion?(d(),c("p",K,r(i.votacion.descripcion),1)):_("",!0),s("div",Q,[s("div",X,[t(e(w),{variant:"outline"},{default:a(()=>[n(r(i.votacion.categoria.nombre),1)]),_:1})]),s("div",Y,[t(e(D),{class:"h-4 w-4"}),n(" "+r(g(i.votacion.fecha_inicio))+" - "+r(g(i.votacion.fecha_fin)),1)])])])]),_:1})]),_:1}),t(e(f),null,{default:a(()=>[t(e(x),null,{default:a(()=>[t(e(y),{class:"flex items-center gap-2"},{default:a(()=>[t(e(q),{class:"h-5 w-5"}),o[3]||(o[3]=n(" Información del Voto "))]),_:1})]),_:1}),t(e(p),null,{default:a(()=>[s("div",Z,[s("div",tt,[s("div",null,[t(e(u),{class:"text-sm font-medium text-muted-foreground"},{default:a(()=>o[4]||(o[4]=[n("Fecha y Hora")])),_:1}),s("p",et,r(g(i.voto.created_at)),1)]),s("div",null,[t(e(u),{class:"text-sm font-medium text-muted-foreground"},{default:a(()=>o[5]||(o[5]=[n("ID del Voto")])),_:1}),s("p",st,"#"+r(i.voto.id),1)])]),s("div",ot,[s("div",null,[t(e(u),{class:"text-sm font-medium text-muted-foreground"},{default:a(()=>o[6]||(o[6]=[n("IP Address")])),_:1}),s("p",at,r(i.voto.ip_address),1)]),s("div",null,[t(e(u),{class:"text-sm font-medium text-muted-foreground"},{default:a(()=>o[7]||(o[7]=[n("Token de Verificación Firmado")])),_:1}),s("div",it,[s("p",nt,r(i.voto.token_unico),1),t(e(v),{variant:"outline",size:"sm",onClick:M,class:R({"bg-green-50 border-green-200":m.value})},{default:a(()=>[t(e(W),{class:"h-4 w-4"}),n(" "+r(m.value?"Copiado!":"Copiar"),1)]),_:1},8,["class"])]),o[9]||(o[9]=s("p",{class:"text-xs text-muted-foreground mb-2"}," Token firmado digitalmente que contiene tus respuestas. Verificable públicamente. ",-1)),s("div",rt,[t(e(v),{variant:"outline",size:"sm",onClick:S,class:"text-xs"},{default:a(()=>[t(e(j),{class:"h-3 w-3 mr-1"}),o[8]||(o[8]=n(" Verificar Públicamente "))]),_:1})])])])])]),_:1})]),_:1}),t(e(f),null,{default:a(()=>[t(e(x),null,{default:a(()=>[t(e(y),{class:"flex items-center gap-2"},{default:a(()=>[t(e(h),{class:"h-5 w-5"}),o[10]||(o[10]=n(" Mis Respuestas "))]),_:1})]),_:1}),t(e(p),null,{default:a(()=>[s("div",lt,[(d(!0),c(C,null,z(i.votacion.formulario_config,(l,b)=>(d(),c("div",{key:l.id,class:"space-y-2"},[s("div",dt,[s("div",ct,[t(e(u),{class:"text-base font-medium"},{default:a(()=>[n(r(b+1)+". "+r(l.title)+" ",1),l.required?(d(),c("span",ut,"*")):_("",!0)]),_:2},1024),l.description?(d(),c("p",mt,r(l.description),1)):_("",!0)]),t(e(w),{variant:"secondary",class:"ml-4"},{default:a(()=>[n(r(l.type==="text"?"Texto":l.type==="textarea"?"Texto largo":l.type==="select"?"Selección":l.type==="radio"?"Opción única":l.type==="checkbox"?"Múltiple":l.type),1)]),_:2},1024)]),s("div",ft,[s("p",pt,r(B(l,i.voto.respuestas[l.id])),1)]),b<i.votacion.formulario_config.length-1?(d(),H(e(A),{key:0,class:"mt-6"})):_("",!0)]))),128))])]),_:1})]),_:1}),t(e(f),{class:"border-green-200 bg-green-50/50"},{default:a(()=>[t(e(p),{class:"pt-6"},{default:a(()=>[s("div",_t,[t(e(h),{class:"h-5 w-5 text-green-600 mt-0.5"}),o[11]||(o[11]=s("div",null,[s("p",{class:"font-medium text-green-800"},"Voto registrado exitosamente"),s("p",{class:"text-sm text-green-700 mt-1"}," Tu voto ha sido firmado digitalmente y almacenado de forma segura. El token contiene tus respuestas y puede ser verificado públicamente para confirmar la integridad del proceso electoral. ")],-1))])]),_:1})]),_:1})])]),_:1})],64))}});export{Bt as default};
